go test -v -race ./...
?   	github.com/cloudflare/tf-migrate/cmd/tf-migrate	[no test files]
?   	github.com/cloudflare/tf-migrate/integration	[no test files]
=== RUN   TestV4ToV5Migration
    integration_test.go:61: Discovered 21 resources to test: [account_member api_token dns_record logpull_retention logpush_job notification_policy_webhooks pages_project r2_bucket workers_kv workers_kv_namespace zero_trust_access_service_token zero_trust_device_posture_rule zero_trust_dlp_custom_profile zero_trust_gateway_policy zero_trust_list zero_trust_tunnel_cloudflared zero_trust_tunnel_cloudflared_route zone zone_datasource zone_dnssec zones_datasource]
=== RUN   TestV4ToV5Migration/account_member
=== RUN   TestV4ToV5Migration/api_token
    test_runner.go:78: Output comparison failed: comparison failed:
        api_token.tf: content mismatch:
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # Test Case 1: Basic API token with single policy
        resource "cloudflare_api_token" "basic_token" {
          name = "cftftest Basic API Token"
        
          policies = [{
            effect = "allow"
            resources = jsonencode({
              "com.cloudflare.api.account.*" = "*"
            })
            permission_groups = [{
              id = "c8fed203ed3043cba015a93ad1616f1f"
              }, {
              id = "82e64a83756745bbbb1c9c2701bf816b"
            }]
          }]
        }
        
        # Test Case 2: API token with multiple policies
        resource "cloudflare_api_token" "multi_policy_token" {
          name = "cftftest Multi Policy Token"
        
        
          policies = [{
            effect = "allow"
            resources = jsonencode({
              "com.cloudflare.api.account.*" = "*"
            })
            permission_groups = [{
              id = "c8fed203ed3043cba015a93ad1616f1f"
            }]
            }, {
            effect = "deny"
            resources = jsonencode({
              "com.cloudflare.api.account.zone.*" = "*"
            })
            permission_groups = [{
              id = "82e64a83756745bbbb1c9c2701bf816b"
            }]
          }]
        }
        
        # Test Case 3: API token with condition block
        resource "cloudflare_api_token" "conditional_token" {
          name = "cftftest Conditional Token"
        
        
          policies = [{
            effect = "allow"
            resources = jsonencode({
              "com.cloudflare.api.account.*" = "*"
            })
            permission_groups = [{
              id = "c8fed203ed3043cba015a93ad1616f1f"
            }]
          }]
          condition = {
            request_ip = {
              in = [
                "192.168.1.0/24",
                "10.0.0.0/8"
              ]
            }
          }
        }
        
        # Test Case 4: API token with condition including not_in
        resource "cloudflare_api_token" "advanced_condition_token" {
          name = "cftftest Advanced Condition Token"
        
        
          policies = [{
            effect = "allow"
            resources = jsonencode({
              "com.cloudflare.api.account.*"      = "*"
              "com.cloudflare.api.account.zone.*" = "*"
            })
            permission_groups = [{
              id = "c8fed203ed3043cba015a93ad1616f1f"
            }]
          }]
          condition = {
            request_ip = {
              in = [
                "192.168.0.0/16",
                "10.0.0.0/8",
                "172.16.0.0/12"
              ]
              not_in = [
                "192.168.1.100/32",
                "10.0.0.1/32"
              ]
            }
          }
        }
        
        # Test Case 5: API token with TTL fields
        resource "cloudflare_api_token" "time_limited_token" {
          name [32m      [0m= "cftftest Time Limited Token"
          expires_on = "2025-12-31T23:59:59Z"
          not_before = "2024-01-01T00:00:00Z"
        
          policies = [{
            effect = "allow"
            resources = jsonencode({
              "com.cloudflare.api.account.*" = "*"
            })
            permission_groups = [{
              id = "c8fed203ed3043cba015a93ad1616f1f"
            }]
          }]
        }
        
        # Test Case 6: API token with minimal permission groups
        resource "cloudflare_api_token" "empty_perms_token" {
          name = "cftftest Minimal Permissions Token"
        
          policies = [{
            effect = "allow"
            resources = jsonencode({
              "com.cloudflare.api.account.*" = "*"
            })
            permission_groups = [{
              id = "c8fed203ed3043cba015a93ad1616f1f"
            }]
          }]
        }
        
        # Test Case 7: Full example with all features
        resource "cloudflare_api_token" "full_example" {
          name[32m      [0m = "cftftest Full Example Token"
          expires_on = "2035-12-31T23:59:59Z"
          not_before = "2024-01-01T00:00:00Z"
        
        
        
          policies = [{
            effect = "allow"
            resources = jsonencode({
              "com.cloudflare.api.account.*"      = "*"
              "com.cloudflare.api.account.zone.*" = "*"
            })
            permission_groups = [{
              id = "c8fed203ed3043cba015a93ad1616f1f"
            }]
            }, {
            effect = "deny"
            resources = jsonencode({
              "com.cloudflare.api.account.zone.*" = "*"
            })
            permission_groups = [{
              id = "e086da7e2179491d91ee5f35b3ca210a"
            }]
          }]
          condition = {
            request_ip = {
              in = [
                "192.168.0.0/16",
                "10.0.0.0/8",
                "172.16.0.0/12",
                "fd00::/8"
              ]
              not_in = [
                "192.168.1.1/32",
                "10.0.0.1/32"
              ]
            }
          }
        }
        
        # Test Case 8: Token with data reference and timestamps
        resource "cloudflare_api_token" "api_token_create" {
          name = "cftftest api_token_create"
        
        
          not_before = "2024-01-01T00:00:00Z"
          expires_on = "2035-12-31T23:59:59Z"
        
          policies = [{
            resources = jsonencode({
              "com.cloudflare.api.account.*" = "*"
            })
            effect = "allow"
            permission_groups = [{
              id = "c8fed203ed3043cba015a93ad1616f1f"
            }]
          }]
          condition = {
            request_ip = {
              in     = ["192.0.2.1/32"]
              not_in = ["198.51.100.1/32"]
            }
          }
        }
        
        # Test Case 9: Token with complex multi-key resources map
        resource "cloudflare_api_token" "complex_resources_token" {
          name = "cftftest Complex Resources Token"
        
          policies = [{
            effect = "allow"
            resources = jsonencode({
              "com.cloudflare.api.account.*"      = "*"
              "com.cloudflare.api.account.zone.*" = "*"
            })
            permission_groups = [{
              id = "c8fed203ed3043cba015a93ad1616f1f"
            }]
          }]
        }
        
        # Test Case 10: Token with multiple permission groups (v4 string format)
        resource "cloudflare_api_token" "multi_perms_token" {
          name = "cftftest Multiple Permissions Token"
        
          policies = [{
            effect = "allow"
            resources = jsonencode({
              "com.cloudflare.api.account.*" = "*"
            })
            permission_groups = [{
              id = "c8fed203ed3043cba015a93ad1616f1f"
              }, {
              id = "82e64a83756745bbbb1c9c2701bf816b"
            }]
          }]
        }
        
        # Test Case 11: Token without effect (should default to allow)
        resource "cloudflare_api_token" "no_effect_token" {
          name = "cftftest No Effect Token"
        
          policies = [{
            resources = jsonencode({
              "com.cloudflare.api.account.*" = "*"
            })
            effect = "allow"
            permission_groups = [{
              id = "c8fed203ed3043cba015a93ad1616f1f"
            }]
          }]
        }
        
        # Test Case 12: Token with variable references in resources
        resource "cloudflare_api_token" "variable_resources_token" {
          name = "cftftest Variable Resources Token"
        
          policies = [{
            effect = "allow"
            resources = jsonencode({
              "com.cloudflare.api.account.${var.cloudflare_account_id}"   = "*"
              "com.cloudflare.api.account.zone.${var.cloudflare_zone_id}" = "*"
            })
            permission_groups = [{
              id = "c8fed203ed3043cba015a93ad1616f1f"
            }]
          }]
        }
=== RUN   TestV4ToV5Migration/dns_record
    test_runner.go:78: Output comparison failed: comparison failed:
        dns_record.tf: content mismatch:
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # Standard DNS records
        resource "cloudflare_dns_record" "example_a" {
          zone_id = var.cloudflare_zone_id
          name [32m   [0m= "cftftest-example"
          type    = "A"
          proxied = true
          ttl     = 1
          content = "192.0.2.1"
        }
        
        resource "cloudflare_dns_record" "example_mx" {
          zone_id  = var.cloudflare_zone_id
          name     = "@"
          type     = "MX"
          priority = 10
          ttl      = 1
          content  = "mail.example.com"
        }
        
        # CAA record with data block - flags should be numeric, content renamed to value
        resource "cloudflare_dns_record" "example_caa" {
          zone_id = var.cloudflare_zone_id
          name    = "@"
          type    = "CAA"
          ttl     = 1
          data = {
            flags = "0"
            tag   = "issue"
            value = "ca.example.com"
          }
        }
        
        # CAA record with data attribute map
        resource "cloudflare_dns_record" "example_caa_map" {
          zone_id = var.cloudflare_zone_id
          name [32m   [0m= "cftftest-caa-map"
          type    = "CAA"
          ttl     = 1
          data = {
            flags = "128"
            tag   = "issuewild"
            value = "ca.example.com"
          }
        }
        
        # SRV record with data block - priority should be hoisted
        resource "cloudflare_dns_record" "example_srv" {
          zone_id  = var.cloudflare_zone_id
          name[32m    [0m = "cftftest-service._tcp"
          type     = "SRV"
          priority = 5
          ttl      = 1
          data = {
            priority = 5
            weight   = 10
            port     = 5060
            target   = "sip.example.com"
          }
        }
        
        # URI record with data block - priority should be hoisted
        resource "cloudflare_dns_record" "example_uri" {
          zone_id  = var.cloudflare_zone_id
          name [32m    [0m= "cftftest-http._tcp"
          type     = "URI"
          priority = 10
          ttl      = 1
          data = {
            weight = 20
            target = "http://example.com/path"
          }
        }
        
        # Record without TTL - should add default TTL
        resource "cloudflare_dns_record" "example_cname" {
          zone_id = var.cloudflare_zone_id
          name[32m   [0m = "cftftest-www"
          type    = "CNAME"
          proxied = false
          ttl     = 1
          content = "example.com"
        }
        
        # Record with existing TTL
        resource "cloudflare_dns_record" "example_txt" {
          zone_id = var.cloudflare_zone_id
          name    = "@"
          type    = "TXT"
          ttl     = 3600
          content = "v=spf1 include:_spf.example.com ~all"
        }
        
        # TXT record for OPENPGPKEY (not a native type in v4)
        # This tests migrating custom TXT records
        resource "cloudflare_dns_record" "example_openpgpkey" {
          zone_id = var.cloudflare_zone_id
          name [32m   [0m= "cftftest-user._openpgpkey"
          type    = "TXT"
          ttl     = 3600
          content = "mQENBFzjqGoBCADTKLKfh..."
        }
        
        # ========================================
        # Advanced Terraform Patterns for Testing
        # ========================================
        
        # Pattern 1: Variable references
        variable "domain_name" {
          type    = string
          default = "example.com"
        }
        
        variable "record_ttl" {
          type    = number
          default = 3600
        }
        
        # Pattern 2: Local values with expressions
        locals {
          proxied_ttl    = 1
          tags           = ["e2e-test", "migration-test"]
          common_zone_id = var.cloudflare_zone_id
        
          # Complex expression
          subdomain_prefix = "cftftest"
          full_subdomain   = "${local.subdomain_prefix}.${var.domain_name}"
        }
        
        # Pattern 3: for_each with map
        variable "subdomains" {
          type = map(object({
            value   = string
            proxied = bool
          }))
          default = {
            "api" = {
              value   = "192.0.2.10"
              proxied = true
            }
            "www" = {
              value   = "192.0.2.11"
              proxied = true
            }
            "static" = {
              value   = "192.0.2.12"
              proxied = false
            }
          }
        }
        
        resource "cloudflare_dns_record" "subdomain_a_records" {
          for_each = var.subdomains
        
          zone_id = local.common_zone_id
          name    = each.key
          type    = "A"
          proxied = each.value.proxied
          ttl     = each.value.proxied ? local.proxied_ttl : var.record_ttl
          content = each.value.value
        }
        
        # Pattern 4: for_each with list converted to set
        variable "txt_records" {
          type = list(object({
            name  = string
            value = string
          }))
          default = [
            {
              name  = "_dmarc"
              value = "v=DMARC1; p=quarantine; rua=mailto:dmarc@example.com"
            },
            {
              name  = "_dkim"
              value = "v=DKIM1; k=rsa; p=MIGfMA0GCS..."
            }
          ]
        }
        
        resource "cloudflare_dns_record" "security_txt_records" {
          for_each = { for idx, record in var.txt_records : record.name => record }
        
          zone_id = var.cloudflare_zone_id
          name    = each.value.name
          type    = "TXT"
          ttl     = var.record_ttl
          content = each.value.value
        }
        
        # Pattern 5: Count-based resources
        variable "backup_mx_count" {
          type    = number
          default = 3
        }
        
        resource "cloudflare_dns_record" "backup_mx" {
          count = var.backup_mx_count
        
          zone_id  = var.cloudflare_zone_id
          name     = "@"
          type     = "MX"
          priority = (count.index + 2) * 10
          ttl      = var.record_ttl
          content  = "mx${count.index + 2}.${var.domain_name}"
        }
        
        # Pattern 6: Conditional resource creation
        variable "enable_ipv6" {
          type    = bool
          default = true
        }
        
        resource "cloudflare_dns_record" "ipv6_aaaa" {
          count = var.enable_ipv6 ? 1 : 0
        
          zone_id = var.cloudflare_zone_id
          name [32m   [0m= "cftftest-ipv6"
          type    = "AAAA"
          proxied = true
          ttl     = 1
          content = "2001:db8:85a3::8a2e:370:7334"
        }
        
        # Pattern 7: Dynamic blocks (if supported)
        variable "caa_records" {
          type = list(object({
            flags = number
            tag   = string
            value = string
          }))
          default = [
            {
              flags = 0
              tag   = "issue"
              value = "letsencrypt.org"
            },
            {
              flags = 0
              tag   = "issuewild"
              value = "letsencrypt.org"
            }
          ]
        }
        
        # Pattern 8: Resource with complex data structures
        resource "cloudflare_dns_record" "dnslink" {
          zone_id = var.cloudflare_zone_id
          name [32m   [0m= "cftftest-dnslink"
          type    = "TXT"
          ttl     = var.record_ttl
          content = "dnslink=/ipfs/QmXoypizjW3WknFiJnKLwHCnL72vedxjQkDDP1mXWo6uco"
        }
        
        # Pattern 9: Cross-resource references
        resource "cloudflare_dns_record" "cname_to_a" {
          zone_id = var.cloudflare_zone_id
          name[32m   [0m = "cftftest-alias"
          type    = "CNAME"
          proxied = false
          ttl     = var.record_ttl
          content = "example.${var.domain_name}"
        }
        
        # Pattern 10: Resource with lifecycle meta-arguments
        resource "cloudflare_dns_record" "protected_record" {
          zone_id = var.cloudflare_zone_id
          name [32m   [0m= "cftftest-protected"
          type    = "A"
          proxied = true
          ttl     = 1
        
          lifecycle {
            prevent_destroy       = false
            create_before_destroy = true
          }
          content = "192.0.2.99"
        }
        
        # Pattern 11: Using terraform expressions
        resource "cloudflare_dns_record" "conditional_value" {
          zone_id = var.cloudflare_zone_id
          name [32m   [0m= "cftftest-conditional"
          type    = var.enable_ipv6 ? "AAAA" : "A"
          proxied = true
          ttl     = 1
          content = var.enable_ipv6 ? "2001:db8::1" : "192.0.2.100"
        }
        
        # Pattern 12: Resource with tags/comments
        resource "cloudflare_dns_record" "tagged_record" {
          zone_id = var.cloudflare_zone_id
          name[32m   [0m = "cftftest-tagged"
          type    = "A"
          proxied = true
          ttl     = 1
          comment = "This is a test record for e2e migration testing"
          content = "192.0.2.200"
        }
=== RUN   TestV4ToV5Migration/logpull_retention
=== RUN   TestV4ToV5Migration/logpush_job
    test_runner.go:78: Output comparison failed: comparison failed:
        logpush_job.tf: content mismatch:
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # Minimal logpush job
        resource "cloudflare_logpush_job" "minimal" {
          account_id       = var.cloudflare_account_id
          dataset          = "audit_logs"
          destination_conf = "https://logpush-receiver.sd.cfplat.com"
        }
        
        # Job with logpull_options only (no output_options)
        resource "cloudflare_logpush_job" "with_logpull_options" {
          account_id       = var.cloudflare_account_id
          dataset          = "audit_logs"
          destination_conf = "https://logpush-receiver.sd.cfplat.com"
          logpull_options  = "fields=ClientIP,EdgeStartTimestamp&timestamps=unixnano"
        }
        
        # Job with output_options block
        resource "cloudflare_logpush_job" "with_output_options" {
          account_id       = var.cloudflare_account_id
          dataset          = "audit_logs"
          destination_conf = "https://logpush-receiver.sd.cfplat.com"
        
          output_options = {
            batch_prefix     = "{"
            batch_suffix     = "}"
            field_names      = ["ClientIP", "EdgeStartTimestamp"]
            output_type      = "ndjson"
            cve_2021_44228   = false
            field_delimiter  = ","
            record_prefix    = "{"
            record_suffix    = "}\n"
            timestamp_format = "unixnano"
            sample_rate      = 1
          }
        }
        
        # Job with cve20214428 field (should be renamed)
        resource "cloudflare_logpush_job" "with_cve_field" {
          account_id       = var.cloudflare_account_id
          dataset          = "audit_logs"
          destination_conf = "https://logpush-receiver.sd.cfplat.com"
        
          output_options = {
            output_type      = "ndjson"
            cve_2021_44228   = true
            field_delimiter  = ","
            record_prefix    = "{"
            record_suffix    = "}\n"
            timestamp_format = "unixnano"
            sample_rate      = 1
          }
        }
        
        # Job with edge kind (should be preserved)
        resource "cloudflare_logpush_job" "edge_logs" {
          zone_id          = var.cloudflare_zone_id
          dataset          = "http_requests"
          destination_conf = "https://logpush-receiver.sd.cfplat.com"
          kind             = "edge"
        }
        
        # Job with "" kind (should be preserved)
        resource "cloudflare_logpush_job" "empty_kind" {
          zone_id          = var.cloudflare_zone_id
          dataset          = "http_requests"
          destination_conf = "https://logpush-receiver.sd.cfplat.com"
          kind             = ""
        }
        
        # Full featured job with all transformations
        resource "cloudflare_logpush_job" "full" {
          zone_id          = var.cloudflare_zone_id
          dataset          = "http_requests"
          destination_conf = "https://logpush-receiver.sd.cfplat.com"
          kind             = "edge"
          enabled          = true
          name [32m            [0m= "cftftest-my-logpush-job"
          frequency        = "high"
        
          output_options = {
            batch_prefix     = "{"
            batch_suffix     = "}"
            field_names      = ["ClientIP", "EdgeStartTimestamp", "RayID"]
            output_type      = "ndjson"
            sample_rate      = 1.0
            timestamp_format = "unixnano"
            cve_2021_44228   = true
            field_delimiter  = ","
            record_prefix    = "{"
            record_suffix    = "}\n"
          }
        }
=== RUN   TestV4ToV5Migration/notification_policy_webhooks
    test_runner.go:78: Output comparison failed: comparison failed:
        notification_policy_webhooks.tf: content mismatch:
        # ========================================
        # Variables
        # ========================================
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # Use Cloudflare trace endpoint for webhook testing
        # URL: https://www.cloudflare.com/cdn-cgi/trace
        # This endpoint responds with 200 OK to all requests for webhook validation
        
        # ========================================
        # Locals
        # ========================================
        locals {
          common_account   = var.cloudflare_account_id
          name_prefix [32m     [0m= "cftftest"
          webhook_base_url = "https://www.cloudflare.com/cdn-cgi/trace"
          enable_backup    = true
          enable_test      = false
        }
        
        # ========================================
        # Basic Resources
        # ========================================
        
        # Test Case 1: Basic webhook with minimal fields
        resource "cloudflare_notification_policy_webhooks" "basic_webhook" {
          account_id = var.cloudflare_account_id
          name       = "basic-webhook"
          url        = "https://www.cloudflare.com/cdn-cgi/trace"
        }
        
        # Test Case 2: Full webhook with all fields
        resource "cloudflare_notification_policy_webhooks" "full_webhook" {
          account_id = var.cloudflare_account_id
          name       = "production-webhook"
          url        = "https://www.cloudflare.com/cdn-cgi/trace"
          secret     = "webhook-secret-token-12345"
        }
        
        # ========================================
        # for_each with Maps Pattern (3 resources)
        # ========================================
        resource "cloudflare_notification_policy_webhooks" "map_example" {
          for_each = {
            "alerts" = {
              name   = "alerts-webhook"
              secret = "alerts-secret-123"
            }
            "monitoring" = {
              name   = "monitoring-webhook"
              secret = "monitoring-secret-456"
            }
            "security" = {
              name   = "security-webhook"
              secret = "security-secret-789"
            }
          }
        
          account_id = local.common_account
          name       = each.value.name
          url        = local.webhook_base_url
          secret     = each.value.secret
        }
        
        # ========================================
        # for_each with Sets Pattern (4 resources)
        # ========================================
        resource "cloudflare_notification_policy_webhooks" "set_example" {
          for_each = toset([
            "alpha",
            "beta",
            "gamma",
            "delta"
          ])
        
          account_id = var.cloudflare_account_id
          name       = "set-${each.value}"
          url        = local.webhook_base_url
        }
        
        # ========================================
        # count-based Resources (3 resources)
        # ========================================
        resource "cloudflare_notification_policy_webhooks" "counted" {
          count = 3
        
          account_id = var.cloudflare_account_id
          name       = "webhook-${count.index}"
          url        = local.webhook_base_url
        }
        
        # ========================================
        # Conditional Creation
        # ========================================
        resource "cloudflare_notification_policy_webhooks" "conditional_enabled" {
          count = local.enable_backup ? 1 : 0
        
          account_id = var.cloudflare_account_id
          name       = "conditional-enabled"
          url        = local.webhook_base_url
        }
        
        resource "cloudflare_notification_policy_webhooks" "conditional_disabled" {
          count = local.enable_test ? 1 : 0
        
          account_id = var.cloudflare_account_id
          name       = "conditional-disabled"
          url        = local.webhook_base_url
        }
        
        # ========================================
        # Terraform Functions
        # ========================================
        resource "cloudflare_notification_policy_webhooks" "with_functions" {
          account_id = local.common_account
          name       = join("-", [local.name_prefix, "function", "example"])
          url        = local.webhook_base_url
          secret     = "function-test-secret"
        }
        
        # ========================================
        # Lifecycle Meta-Arguments
        # ========================================
        resource "cloudflare_notification_policy_webhooks" "with_lifecycle" {
          account_id = var.cloudflare_account_id
          name       = "lifecycle-test"
          url        = local.webhook_base_url
        
          lifecycle {
            create_before_destroy = true
          }
        }
        
        resource "cloudflare_notification_policy_webhooks" "with_prevent_destroy" {
          account_id = var.cloudflare_account_id
          name       = "prevent-destroy-test"
          url        = local.webhook_base_url
        
          lifecycle {
            prevent_destroy = false
          }
        }
        
        # ========================================
        # Edge Cases
        # ========================================
        
        # Minimal resource (only required fields)
        resource "cloudflare_notification_policy_webhooks" "minimal" {
          account_id = var.cloudflare_account_id
          name       = "minimal"
          url        = local.webhook_base_url
        }
        
        # Maximal resource (all fields populated)
        resource "cloudflare_notification_policy_webhooks" "maximal" {
          account_id = var.cloudflare_account_id
          name       = "maximal-webhook-with-all-fields"
          url        = local.webhook_base_url
          secret     = "maximal-secret-token-with-special-chars-!@#$"
        }
        
        # URL with special characters
        resource "cloudflare_notification_policy_webhooks" "special_chars" {
          account_id = var.cloudflare_account_id
          name       = "special-chars-test"
          url        = local.webhook_base_url
        }
=== RUN   TestV4ToV5Migration/pages_project
    test_runner.go:78: Output comparison failed: comparison failed:
        pages_project.tf: content mismatch:
        # ========================================
        # Variables
        # ========================================
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # Test Case 1: Minimal Pages Project
        resource "cloudflare_pages_project" "minimal" {
          account_id        = var.cloudflare_account_id
          name [32m             [0m= "cftftest-minimal-project"
          production_branch = "main"
          build_config      = {}
          deployment_configs = {
            preview = {
              compatibility_flags = []
              usage_model         = "bundled"
              fail_open           = false
            }
            production = {
              compatibility_flags = []
              fail_open           = false
              usage_model         = "bundled"
            }
          }
        }
        
        # Test Case 2: Pages Project with build_config block
        resource "cloudflare_pages_project" "with_build_config" {
          account_id        = var.cloudflare_account_id
          name[32m             [0m = "cftftest-project-with-build"
          production_branch = "main"
        
          build_config = {
            build_command       = "npm run build"
            destination_dir     = "public"
            root_dir            = "/"
            web_analytics_tag   = "abc123"
            web_analytics_token = "token123"
          }
          deployment_configs = {
            preview = {
              compatibility_flags = []
              usage_model         = "bundled"
              fail_open           = false
            }
            production = {
              compatibility_flags = []
              fail_open           = false
              usage_model         = "bundled"
            }
          }
        }
        
        # Test Case 3: Pages Project with source and config blocks
        resource "cloudflare_pages_project" "with_source" {
          account_id        = var.cloudflare_account_id
          name[32m             [0m = "cftftest-project-with-source"
          production_branch = "main"
        
          #source {
          #  type = "github"
          #
          #    config {
          #      owner                         = "cloudflare"
          #      repo_name                     = "test-repo"
          #      production_branch             = "main"
          #      pr_comments_enabled           = true
          #      deployments_enabled           = true
          #      production_deployment_enabled = true
          #      preview_deployment_setting    = "custom"
          #      preview_branch_includes       = ["dev", "staging"]
          #      preview_branch_excludes       = ["temp"]
          #    }
          #  }
          build_config = {}
          deployment_configs = {
            preview = {
              compatibility_flags = []
              usage_model         = "bundled"
              fail_open           = false
            }
            production = {
              compatibility_flags = []
              fail_open           = false
              usage_model         = "bundled"
            }
          }
        }
        
        # Test Case 4: Pages Project with deployment_configs
        resource "cloudflare_pages_project" "with_deployment_configs" {
          account_id        = var.cloudflare_account_id
          name [32m             [0m= "cftftest-project-with-deployments"
          production_branch = "main"
        
          build_config = {}
          deployment_configs = {
            preview = {
              compatibility_date  = "2024-01-01"
              compatibility_flags = ["nodejs_compat"]
              usage_model         = "bundled"
              fail_open           = false
              placement = {
                mode = "smart"
              }
            }
            production = {
              compatibility_date  = "2024-01-01"
              compatibility_flags = ["nodejs_compat", "streams_enable_constructors"]
              usage_model         = "bundled"
              fail_open           = false
              placement = {
                mode = "smart"
              }
            }
          }
        }
        
        # Test Case 5: Full Pages Project with all features
        resource "cloudflare_pages_project" "full" {
          account_id        = var.cloudflare_account_id
          name[32m             [0m = "cftftest-full-project"
          production_branch = "main"
        
        
          #source {
          #  type = "github"
          #
          #    config {
          #      owner                         = "my-org"
          #      repo_name                     = "my-app"
          #      production_branch             = "main"
          #      production_deployment_enabled = true
          #      pr_comments_enabled           = true
          #    }
          #  }
        
          build_config = {
            build_command   = "npm run build"
            destination_dir = "dist"
            root_dir        = "/app"
          }
          deployment_configs = {
            preview = {
              compatibility_date  = "2024-01-01"
              compatibility_flags = []
              usage_model         = "bundled"
              fail_open           = false
              placement = {
                mode = "smart"
              }
            }
            production = {
              compatibility_date  = "2024-01-01"
              compatibility_flags = []
              fail_open           = false
              usage_model         = "bundled"
              placement = {
                mode = "smart"
              }
            }
          }
        }
        
        # Test Case 6: Project with only deployment configs (no build/source)
        resource "cloudflare_pages_project" "deployment_only" {
          account_id        = var.cloudflare_account_id
          name[32m             [0m = "cftftest-deployment-only"
          production_branch = "main"
        
          build_config = {}
          deployment_configs = {
            preview = {
              compatibility_date  = "2024-01-15"
              compatibility_flags = []
              usage_model         = "bundled"
              fail_open           = false
              placement = {
                mode = "smart"
              }
            }
            production = {
              compatibility_date  = "2024-01-15"
              compatibility_flags = []
              fail_open           = false
              usage_model         = "bundled"
              placement = {
                mode = "smart"
              }
            }
          }
        }
=== RUN   TestV4ToV5Migration/r2_bucket
=== RUN   TestV4ToV5Migration/workers_kv
    test_runner.go:78: Output comparison failed: comparison failed:
        workers_kv.tf: content mismatch:
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # Locals for reusable values
        locals {
          common_account   = var.cloudflare_account_id
          namespace_prefix = "cftftest-kv"
          test_keys = [
            "config_key_1",
            "config_key_2",
            "config_key_3"
          ]
          enable_optional = true
          disable_test    = false
        }
        
        # Parent resource: KV Namespace for dependency testing
        resource "cloudflare_workers_kv_namespace" "test_namespace" {
          account_id = local.common_account
          title [32m     [0m= "${local.namespace_prefix}-namespace"
        }
        
        # Pattern Group 1: Basic Resources
        # Test Case 1: Minimal resource (only required fields)
        resource "cloudflare_workers_kv" "minimal" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "minimal_value"
          key_name     = "minimal_key"
        }
        
        # Test Case 2: Basic resource with cross-resource reference
        resource "cloudflare_workers_kv" "basic" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "config_value"
          key_name     = "config_key"
        }
        
        # Test Case 3: KV with special characters in key
        resource "cloudflare_workers_kv" "special_chars" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "{\"api_key\": \"test123\", \"endpoint\": \"https://api.example.com\"}"
          key_name     = "api/token"
        }
        
        # Test Case 4: KV with empty value
        resource "cloudflare_workers_kv" "empty_value" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = ""
          key_name     = "placeholder"
        }
        
        # Test Case 5: KV with special characters in value
        resource "cloudflare_workers_kv" "special_value" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "Line 1\nLine 2\tTabbed\r\nWindows line"
          key_name     = "special_value_key"
        }
        
        # Pattern Group 2: for_each with Maps (3-5 resources)
        resource "cloudflare_workers_kv" "map_example" {
          for_each = {
            "config1" = {
              key   = "map_config_1"
              value = "Config value 1"
            }
            "config2" = {
              key   = "map_config_2"
              value = "Config value 2"
            }
            "config3" = {
              key   = "map_config_3"
              value = "Config value 3"
            }
            "config4" = {
              key   = "map_config_4"
              value = "Config value 4"
            }
          }
        
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = each.value.value
          key_name     = each.value.key
        }
        
        # Pattern Group 3: for_each with Sets (3-5 items)
        resource "cloudflare_workers_kv" "set_example" {
          for_each = toset([
            "alpha",
            "beta",
            "gamma",
            "delta"
          ])
        
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "Value for ${each.value}"
          key_name     = "set-${each.value}"
        }
        
        # Pattern Group 4: count-based Resources (at least 3)
        resource "cloudflare_workers_kv" "counted" {
          count = 3
        
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "This is count resource number ${count.index}"
          key_name     = "counted-${count.index}"
        }
        
        # Pattern Group 5: Conditional Creation
        resource "cloudflare_workers_kv" "conditional_enabled" {
          count = local.enable_optional ? 1 : 0
        
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "This resource is conditionally created"
          key_name     = "conditional_enabled_key"
        }
        
        resource "cloudflare_workers_kv" "conditional_disabled" {
          count = local.disable_test ? 1 : 0
        
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "This resource should NOT be created"
          key_name     = "conditional_disabled_key"
        }
        
        # Pattern Group 6: Terraform Functions
        resource "cloudflare_workers_kv" "with_functions" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
        
        
          # String interpolation with account ID
          value    = "Resource for account ${var.cloudflare_account_id}"
          key_name = join("-", ["test", "function", "key"])
        }
        
        resource "cloudflare_workers_kv" "with_base64" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
        
          # base64encode() function
          value    = base64encode("This is a base64 encoded value for testing")
          key_name = "encoded_key"
        }
        
        # Pattern Group 7: Lifecycle Meta-Arguments
        resource "cloudflare_workers_kv" "with_lifecycle" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "Testing lifecycle rules"
        
          lifecycle {
            create_before_destroy = true
          }
          key_name = "lifecycle_test_key"
        }
        
        resource "cloudflare_workers_kv" "with_ignore_changes" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "Value that might change"
        
          lifecycle {
            ignore_changes = [value]
          }
          key_name = "ignore_changes_key"
        }
        
        # Pattern Group 8: Edge Cases
        # Large value (approaching 25 MiB limit - using a smaller 1KB sample)
        resource "cloudflare_workers_kv" "large_value" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt."
          key_name     = "large_value_key"
        }
        
        # Key with URL encoding special cases
        #resource "cloudflare_workers_kv" "url_encoded_key" {
        #  account_id   = var.cloudflare_account_id
        #  namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
        #  key          = "path/to/resource?query=value&param=test"
        #  value        = "Value for URL-like key"
        #}
        
        # Key with Unicode characters
        resource "cloudflare_workers_kv" "unicode_key" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "Unicode test value: ä½ å¥½ä¸–ç•Œ"
          key_name     = "unicode_æµ‹è¯•_key"
        }
        
        # Value with JSON
        resource "cloudflare_workers_kv" "json_value" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value = jsonencode({
            name    = "test"
            enabled = true
            count   = 42
            tags    = ["tag1", "tag2", "tag3"]
          })
          key_name = "json_data"
        }
        
        # Pattern Group 9: Multiple Resources with Dependencies
        resource "cloudflare_workers_kv_namespace" "secondary_namespace" {
          account_id = var.cloudflare_account_id
          title[32m     [0m = "${local.namespace_prefix}-secondary"
        }
        
        resource "cloudflare_workers_kv" "secondary_ns_kv1" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.secondary_namespace.id
          value        = "Value in secondary namespace 1"
          key_name     = "secondary_key_1"
        }
        
        resource "cloudflare_workers_kv" "secondary_ns_kv2" {
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.secondary_namespace.id
          value        = "Value in secondary namespace 2"
          key_name     = "secondary_key_2"
        }
        
        # Using local values in keys
        resource "cloudflare_workers_kv" "with_locals" {
          count = length(local.test_keys)
        
          account_id   = var.cloudflare_account_id
          namespace_id = cloudflare_workers_kv_namespace.test_namespace.id
          value        = "Value for ${local.test_keys[count.index]}"
          key_name     = local.test_keys[count.index]
        }
=== RUN   TestV4ToV5Migration/workers_kv_namespace
=== RUN   TestV4ToV5Migration/zero_trust_access_service_token
    test_runner.go:78: Output comparison failed: comparison failed:
        zero_trust_access_service_token.tf: content mismatch:
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # ============================================================================
        # Pattern Group 1: Variables & Locals
        # ============================================================================
        
        locals {
          common_account        = var.cloudflare_account_id
          name_prefix [32m          [0m= "cftftest"
          tags                  = ["test", "migration", "v4_to_v5"]
          token_duration        = "8760h"
          enable_long_duration  = true
          enable_short_duration = false
        }
        
        # ============================================================================
        # Pattern Group 2: for_each with Maps (5 resources)
        # ============================================================================
        
        resource "cloudflare_zero_trust_access_service_token" "map_example" {
          for_each = {
            "prod" = {
              account_id           = var.cloudflare_account_id
              name [32m                [0m= "cftftest-prod-service-token"
              duration             = "8760h"
              min_days_for_renewal = 30
            }
            "staging" = {
              account_id           = var.cloudflare_account_id
              name [32m                [0m= "cftftest-staging-service-token"
              duration             = "8760h"
              min_days_for_renewal = 15
            }
            "dev" = {
              account_id           = var.cloudflare_account_id
              name [32m                [0m= "cftftest-dev-service-token"
              duration             = "8760h"
              min_days_for_renewal = 7
            }
            "qa" = {
              account_id           = var.cloudflare_account_id
              name [32m                [0m= "cftftest-qa-service-token"
              duration             = "8760h"
              min_days_for_renewal = 10
            }
            "perf" = {
              account_id           = var.cloudflare_account_id
              name [32m                [0m= "cftftest-perf-service-token"
              duration             = "8760h"
              min_days_for_renewal = 5
            }
          }
        
          account_id = each.value.account_id
          name       = each.value.name
          duration   = each.value.duration
        }
        
        # ============================================================================
        # Pattern Group 3: for_each with Sets (4 items)
        # ============================================================================
        
        resource "cloudflare_zero_trust_access_service_token" "set_example" {
          for_each = toset([
            "alpha",
            "beta",
            "gamma",
            "delta"
          ])
        
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-set-${each.value}-token"
          duration   = local.token_duration
        }
        
        # ============================================================================
        # Pattern Group 4: count-based Resources (3 instances)
        # ============================================================================
        
        resource "cloudflare_zero_trust_access_service_token" "counted" {
          count = 3
        
          account_id = var.cloudflare_account_id
          name[32m      [0m = "cftftest-counted-token-${count.index}"
          duration   = "8760h"
        }
        
        # ============================================================================
        # Pattern Group 5: Conditional Creation
        # ============================================================================
        
        resource "cloudflare_zero_trust_access_service_token" "conditional_enabled" {
          count = local.enable_long_duration ? 1 : 0
        
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-conditional-long-duration"
          duration   = "17520h" # 2 years
        }
        
        resource "cloudflare_zero_trust_access_service_token" "conditional_disabled" {
          count = local.enable_short_duration ? 1 : 0
        
          account_id = var.cloudflare_account_id
          name[32m      [0m = "cftftest-conditional-short-duration"
          duration   = "8760h" # Changed from 720h to valid value
        }
        
        # ============================================================================
        # Pattern Group 7: Terraform Functions
        # ============================================================================
        
        resource "cloudflare_zero_trust_access_service_token" "with_functions" {
          account_id = local.common_account
        
          # join() function
          name = join("-", [local.name_prefix, "function", "example"])
        
          # String interpolation
          duration = "${local.token_duration}"
        
        }
        
        resource "cloudflare_zero_trust_access_service_token" "with_interpolation" {
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-token-for-account-${var.cloudflare_account_id}"
          duration   = "8760h"
        }
        
        # ============================================================================
        # Pattern Group 8: Lifecycle Meta-Arguments
        # ============================================================================
        
        resource "cloudflare_zero_trust_access_service_token" "with_lifecycle" {
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-lifecycle-test-token"
          duration   = "8760h"
        
          lifecycle {
            create_before_destroy = true
            ignore_changes        = [duration]
          }
        }
        
        resource "cloudflare_zero_trust_access_service_token" "with_prevent_destroy" {
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-prevent-destroy-token"
          duration   = "8760h"
        
          lifecycle {
            prevent_destroy = false # Set to false for testing
          }
        }
        
        # ============================================================================
        # Pattern Group 9: Edge Cases
        # ============================================================================
        
        # Minimal resource (only required fields)
        resource "cloudflare_zero_trust_access_service_token" "minimal" {
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-minimal-token"
        }
        
        # Maximal resource (all fields populated)
        resource "cloudflare_zero_trust_access_service_token" "maximal" {
          account_id                        = var.cloudflare_account_id
          name [32m                             [0m= "cftftest-maximal-token"
          duration                          = "8760h"
          client_secret_version             = 5
          previous_client_secret_expires_at = "2025-12-31T23:59:59Z"
        }
        
        # Zero values
        resource "cloudflare_zero_trust_access_service_token" "zero_values" {
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-zero-values-token"
          duration   = "8760h"
        }
        
        # Legacy resource name (cloudflare_access_service_token - deprecated)
        resource "cloudflare_zero_trust_access_service_token" "legacy_name" {
          account_id                        = var.cloudflare_account_id
          name [32m                             [0m= "cftftest-legacy-name-token"
          duration                          = "8760h"
          client_secret_version             = 2
          previous_client_secret_expires_at = "2024-12-31T23:59:59Z"
        }
        
        # Resource without min_days_for_renewal (deprecated field)
        resource "cloudflare_zero_trust_access_service_token" "without_deprecated" {
          account_id = var.cloudflare_account_id
          name[32m      [0m = "cftftest-no-deprecated-field"
          duration   = "8760h"
        }
        
        # Resource with very large client_secret_version
        resource "cloudflare_zero_trust_access_service_token" "large_version" {
          account_id                        = var.cloudflare_account_id
          name                              = "large-version-token"
          duration                          = "8760h"
          client_secret_version             = 999
          previous_client_secret_expires_at = "2025-12-31T23:59:59Z"
        }
        
        # Resource with special characters in name
        resource "cloudflare_zero_trust_access_service_token" "special_chars" {
          account_id = var.cloudflare_account_id
          name       = "token-with-special_chars-123"
          duration   = "8760h"
        }
        
        # Resource with minimum duration
        resource "cloudflare_zero_trust_access_service_token" "min_duration" {
          account_id = var.cloudflare_account_id
          name       = "min-duration-token"
          duration   = "8760h" # Changed from 30m to valid minimum value
        }
        
        # Resource with maximum duration
        resource "cloudflare_zero_trust_access_service_token" "max_duration" {
          account_id = var.cloudflare_account_id
          name       = "max-duration-token"
          duration   = "87600h" # 10 years
        }
=== RUN   TestV4ToV5Migration/zero_trust_device_posture_rule
    test_runner.go:78: Output comparison failed: comparison failed:
        zero_trust_device_posture_rule.tf: content mismatch:
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # ============================================================================
        # Pattern Group 1: Variables & Locals
        # ============================================================================
        
        locals {
          common_account        = var.cloudflare_account_id
          name_prefix [32m          [0m= "cftftest"
          default_schedule      = "24h"
          enable_firewall_rules = true
          enable_test_rules     = false
        }
        
        # ============================================================================
        # Pattern Group 2: for_each with Maps (5 resources)
        # ============================================================================
        
        resource "cloudflare_zero_trust_device_posture_rule" "map_example" {
          for_each = {
            "prod" = {
              account_id = var.cloudflare_account_id
              name [32m      [0m= "cftftest-prod-posture-rule"
              type       = "os_version"
              schedule   = "24h"
              platform   = "linux"
              version    = "20.4.0"
            }
            "staging" = {
              account_id = var.cloudflare_account_id
              name [32m      [0m= "cftftest-staging-posture-rule"
              type       = "firewall"
              schedule   = "12h"
              platform   = "windows"
              version    = "10.0.0"
            }
            "dev" = {
              account_id = var.cloudflare_account_id
              name [32m      [0m= "cftftest-dev-posture-rule"
              type       = "os_version"
              schedule   = "6h"
              platform   = "mac"
              version    = "12.0.0"
            }
            "qa" = {
              account_id = var.cloudflare_account_id
              name [32m      [0m= "cftftest-qa-posture-rule"
              type       = "firewall"
              schedule   = "12h"
              platform   = "linux"
              version    = "1.0.0"
            }
            "perf" = {
              account_id = var.cloudflare_account_id
              name [32m      [0m= "cftftest-perf-posture-rule"
              type       = "os_version"
              schedule   = "24h"
              platform   = "windows"
              version    = "11.0.0"
            }
          }
        
          account_id = each.value.account_id
          name       = each.value.name
          type       = each.value.type
          schedule   = each.value.schedule
        
        
          input = {
            version  = each.value.version
            operator = ">="
          }
          match = [
            {
              platform = each.value.platform
            }
          ]
        }
        
        # ============================================================================
        # Pattern Group 3: for_each with Sets (4 items)
        # ============================================================================
        
        resource "cloudflare_zero_trust_device_posture_rule" "set_example" {
          for_each = toset([
            "alpha",
            "beta",
            "gamma",
            "delta"
          ])
        
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-set-${each.value}-rule"
          type       = "firewall"
          schedule   = "5m"
        
        
          input = {
            enabled = true
          }
          match = [{
            platform = "linux"
          }]
        }
        
        # ============================================================================
        # Pattern Group 4: count-based Resources (3 instances)
        # ============================================================================
        
        resource "cloudflare_zero_trust_device_posture_rule" "counted" {
          count = 3
        
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest-counted-rule-${count.index}"
          type        = "os_version"
          schedule    = "24h"
          description = "This is posture rule number ${count.index}"
        
        
          input = {
            version  = "1.${count.index}.0"
            operator = "=="
          }
          match = [{
            platform = "linux"
          }]
        }
        
        # ============================================================================
        # Pattern Group 5: Conditional Creation
        # ============================================================================
        
        resource "cloudflare_zero_trust_device_posture_rule" "conditional_enabled" {
          count = local.enable_firewall_rules ? 1 : 0
        
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest-conditional-firewall-enabled"
          type        = "firewall"
          schedule    = "12h"
          description = "Conditionally enabled firewall rule"
        
        
          input = {
            enabled = true
          }
          match = [{
            platform = "windows"
          }]
        }
        
        resource "cloudflare_zero_trust_device_posture_rule" "conditional_disabled" {
          count = local.enable_test_rules ? 1 : 0
        
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest-conditional-test-disabled"
          type        = "os_version"
          schedule    = "6h"
          description = "Conditionally disabled test rule"
        
        
          input = {
            version  = "1.0.0"
            operator = ">"
          }
          match = [{
            platform = "linux"
          }]
        }
        
        # ============================================================================
        # Pattern Group 7: Terraform Functions
        # ============================================================================
        
        resource "cloudflare_zero_trust_device_posture_rule" "with_functions" {
          account_id = local.common_account
        
          # join() function
          name = join("-", [local.name_prefix, "function", "example"])
        
          type        = "os_version"
          schedule    = local.default_schedule
          description = "Rule for account ${var.cloudflare_account_id}"
        
        
          input = {
            version  = "22.4.0"
            operator = ">="
          }
          match = [{
            platform = "linux"
          }]
        }
        
        resource "cloudflare_zero_trust_device_posture_rule" "with_interpolation" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest-rule-for-account-${var.cloudflare_account_id}"
          type        = "firewall"
          schedule    = "5m"
          description = "Interpolated rule name"
        
        
          input = {
            enabled = true
          }
          match = [{
            platform = "windows"
          }]
        }
        
        # ============================================================================
        # Pattern Group 8: Lifecycle Meta-Arguments
        # ============================================================================
        
        resource "cloudflare_zero_trust_device_posture_rule" "with_lifecycle" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest-lifecycle-test-rule"
          type        = "os_version"
          schedule    = "24h"
          description = "Rule with lifecycle arguments"
        
        
        
          lifecycle {
            create_before_destroy = true
            ignore_changes        = [description]
          }
          input = {
            version  = "20.4.0"
            operator = ">="
          }
          match = [{
            platform = "linux"
          }]
        }
        
        resource "cloudflare_zero_trust_device_posture_rule" "with_prevent_destroy" {
          account_id = var.cloudflare_account_id
          name[32m      [0m = "cftftest-prevent-destroy-rule"
          type       = "firewall"
          schedule   = "12h"
        
        
        
          lifecycle {
            prevent_destroy = false # Set to false for testing
          }
          input = {
            enabled = true
          }
          match = [{
            platform = "windows"
          }]
        }
        
        # ============================================================================
        # Pattern Group 9: Edge Cases
        # ============================================================================
        
        # Minimal resource (only required fields)
        resource "cloudflare_zero_trust_device_posture_rule" "minimal" {
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-minimal-rule"
          type       = "firewall"
          schedule   = "5m"
        
        
          input = {
            enabled = true
          }
          match = [{
            platform = "linux"
          }]
        }
        
        # Maximal resource (all fields populated)
        resource "cloudflare_zero_trust_device_posture_rule" "maximal" {
          account_id  = var.cloudflare_account_id
          name[32m       [0m = "cftftest-maximal-rule"
          type        = "os_version"
          description = "All fields populated"
          schedule    = "24h"
          expiration  = "24h"
        
        
          input = {
            version            = "22.4.0"
            operator           = ">="
            os_distro_name     = "ubuntu"
            os_distro_revision = "22.4.0"
            os_version_extra   = "(LTS)"
          }
          match = [{
            platform = "linux"
          }]
        }
        
        # Resource with empty/null optional fields
        resource "cloudflare_zero_trust_device_posture_rule" "with_nulls" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest-with-nulls"
          type        = "firewall"
          description = null
          expiration  = null
          schedule    = "5m"
        
        
          input = {
            enabled = true
          }
          match = [{
            platform = "windows"
          }]
        }
        
        # ============================================================================
        # Original Test Cases (Comprehensive Coverage)
        # ============================================================================
        
        # Test case 1: Basic os_version rule with input and match
        resource "cloudflare_zero_trust_device_posture_rule" "basic" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest-tf-test-posture-basic"
          type        = "os_version"
          description = "Device posture rule for corporate devices."
          schedule    = "24h"
          expiration  = "24h"
        
        
          input = {
            version            = "1.0.0"
            operator           = "<"
            os_distro_name     = "ubuntu"
            os_distro_revision = "1.0.0"
            os_version_extra   = "(a)"
          }
          match = [{
            platform = "linux"
          }]
        }
        
        # Test case 2: Firewall rule with enabled input
        resource "cloudflare_zero_trust_device_posture_rule" "firewall" {
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-tf-test-firewall"
          type       = "firewall"
          schedule   = "5m"
        
        
          input = {
            enabled = true
          }
          match = [{
            platform = "windows"
          }]
        }
        
        # Test case 3: Disk encryption with check_disks (Set->List conversion)
        resource "cloudflare_zero_trust_device_posture_rule" "disk_encryption" {
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-tf-test-disk"
          type       = "disk_encryption"
          schedule   = "5m"
        
        
          input = {
            check_disks = ["C:", "D:"]
            require_all = true
          }
          match = [{
            platform = "windows"
          }]
        }
        
        # Test case 4: Multiple platforms (multiple match blocks)
        resource "cloudflare_zero_trust_device_posture_rule" "multi_platform" {
          account_id = var.cloudflare_account_id
          name[32m      [0m = "cftftest-tf-test-multi"
          type       = "firewall"
          schedule   = "5m"
        
        
        
        
          input = {
            enabled = true
          }
          match = [{
            platform = "windows"
            }, {
            platform = "mac"
            }, {
            platform = "linux"
          }]
        }
        
        # Test case 5: Application rule with path and running (removed attribute)
        resource "cloudflare_zero_trust_device_posture_rule" "application" {
          account_id = var.cloudflare_account_id
          name[32m      [0m = "cftftest-tf-test-application"
          type       = "application"
          schedule   = "30m"
        
        
          input = {
            path   = "/usr/bin/security-app"
            sha256 = "abc123def456"
          }
          match = [{
            platform = "linux"
          }]
        }
=== RUN   TestV4ToV5Migration/zero_trust_dlp_custom_profile
    test_runner.go:78: Output comparison failed: comparison failed:
        zero_trust_dlp_custom_profile.tf: content mismatch:
        # Variables (standard - provided by test framework)
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # Resource-specific variables with defaults
        variable "enable_credit_detection" {
          type    = bool
          default = true
        }
        
        variable "enable_pii_detection" {
          type    = bool
          default = false
        }
        
        variable "max_allowed_matches" {
          type    = number
          default = 5
        }
        
        # Locals for common values and computed configurations
        locals {
          common_account = var.cloudflare_account_id
          name_prefix [32m   [0m= "cftftest-dlp"
          tags           = ["migration", "test", "v4_to_v5"]
        
          # Map for for_each iteration
          card_patterns = {
            visa = {
              regex      = "4[0-9]{12}(?:[0-9]{3})?"
              validation = "luhn"
              enabled    = true
            }
            mastercard = {
              regex      = "5[1-5][0-9]{14}"
              validation = "luhn"
              enabled    = true
            }
            amex = {
              regex      = "3[47][0-9]{13}"
              validation = "luhn"
              enabled    = false
            }
            discover = {
              regex      = "6(?:011|5[0-9]{2})[0-9]{12}"
              validation = "luhn"
              enabled    = true
            }
          }
        
          # Set for for_each iteration
          pii_types = toset([
            "ssn",
            "passport",
            "drivers_license",
            "tax_id"
          ])
        }
        
        # Pattern 1: Basic profiles with entries
        resource "cloudflare_zero_trust_dlp_custom_profile" "credit_cards_basic" {
          account_id          = local.common_account
          name                = "${local.name_prefix}-credit-cards-basic"
          description         = "Basic profile for detecting credit card numbers"
          allowed_match_count = var.max_allowed_matches
        
        
          entries = [{
            name    = "Visa Card"
            enabled = true
            pattern = {
              regex      = "4[0-9]{12}(?:[0-9]{3})?"
              validation = "luhn"
            }
            }, {
            name    = "Mastercard"
            enabled = true
            pattern = {
              regex      = "5[1-5][0-9]{14}"
              validation = "luhn"
            }
          }]
        }
        
        resource "cloudflare_zero_trust_dlp_custom_profile" "ssn_detection" {
          account_id          = var.cloudflare_account_id
          name                = join("-", [local.name_prefix, "ssn", "detection"])
          allowed_match_count = 3
        
          entries = [{
            name    = "SSN Pattern"
            enabled = true
            pattern = {
              regex = "[0-9]{3}-[0-9]{2}-[0-9]{4}"
            }
          }]
        }
        
        resource "cloudflare_zero_trust_dlp_custom_profile" "minimal" {
          account_id          = var.cloudflare_account_id
          name                = "${local.name_prefix}-minimal"
          description         = "Minimal configuration for ${var.cloudflare_account_id}"
          allowed_match_count = 1
        
          entries = [{
            name    = "Simple Pattern"
            enabled = true
            pattern = {
              regex = "test[0-9]{1,10}"
            }
          }]
        }
        
        # Pattern 2: for_each with maps (4 instances)
        resource "cloudflare_zero_trust_dlp_custom_profile" "card_profiles_map" {
          for_each = local.card_patterns
        
          account_id          = var.cloudflare_account_id
          name                = "${local.name_prefix}-card-${each.key}"
          description         = "Dedicated profile for ${each.key} cards"
          allowed_match_count = 10
        
          entries = [{
            name    = "${title(each.key)} Pattern"
            enabled = each.value.enabled
            pattern = {
              regex      = each.value.regex
              validation = each.value.validation
            }
          }]
        }
        
        # Pattern 3: for_each with sets (4 instances)
        resource "cloudflare_zero_trust_dlp_custom_profile" "pii_profiles_set" {
          for_each = local.pii_types
        
          account_id          = var.cloudflare_account_id
          name                = "${local.name_prefix}-pii-${each.value}"
          allowed_match_count = 2
        
          entries = [{
            name    = "${title(replace(each.value, "_", " "))} Pattern"
            enabled = true
            pattern = {
              regex = "[A-Z0-9]{8,15}"
            }
          }]
        }
        
        # Pattern 4: count-based resources (3 instances)
        resource "cloudflare_zero_trust_dlp_custom_profile" "counted_profiles" {
          count = 3
        
          account_id          = var.cloudflare_account_id
          name                = "${local.name_prefix}-counted-${count.index}"
          description         = "This is profile number ${count.index}"
          allowed_match_count = count.index + 1
        
          entries = [{
            name    = "Pattern ${count.index}"
            enabled = count.index % 2 == 0 ? true : false
            pattern = {
              regex = "pattern-${count.index}-[0-9]{1,4}"
            }
          }]
        }
        
        # Pattern 5: Conditional creation (1 instance when enabled)
        resource "cloudflare_zero_trust_dlp_custom_profile" "conditional_credit" {
          count = var.enable_credit_detection ? 1 : 0
        
          account_id          = var.cloudflare_account_id
          name                = "${local.name_prefix}-conditional-credit"
          description         = "Created conditionally based on variable"
          allowed_match_count = 15
        
          entries = [{
            name    = "All Credit Cards"
            enabled = true
            pattern = {
              regex      = "(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13})"
              validation = "luhn"
            }
          }]
        }
        
        resource "cloudflare_zero_trust_dlp_custom_profile" "conditional_pii" {
          count = var.enable_pii_detection ? 1 : 0
        
          account_id          = var.cloudflare_account_id
          name                = "${local.name_prefix}-conditional-pii"
          allowed_match_count = 20
        
          entries = [{
            name    = "PII Pattern"
            enabled = true
            pattern = {
              regex = "[A-Z]{2}[0-9]{6}"
            }
          }]
        }
        
        # Pattern 6: Multiple entries
        resource "cloudflare_zero_trust_dlp_custom_profile" "dynamic_entries" {
          account_id          = var.cloudflare_account_id
          name                = "${local.name_prefix}-dynamic-entries"
          description         = "Profile with multiple entries"
          allowed_match_count = 30
        
        
        
          entries = [{
            name    = "Api Key"
            enabled = true
            pattern = {
              regex = "api_key[\\s:=][a-zA-Z0-9]{20,30}"
            }
            }, {
            name    = "Password"
            enabled = false
            pattern = {
              regex = "password[\\s:=][a-zA-Z0-9]{8,16}"
            }
            }, {
            name    = "Token"
            enabled = true
            pattern = {
              regex = "token[\\s:=][a-zA-Z0-9._-]{20,30}"
            }
          }]
        }
        
        # Pattern 7: Profile with null values
        resource "cloudflare_zero_trust_dlp_custom_profile" "with_nulls" {
          account_id          = var.cloudflare_account_id
          name                = "${local.name_prefix}-with-nulls"
          description         = null
          allowed_match_count = 4
        
          entries = [{
            name    = "Entry with null ID"
            enabled = true
            pattern = {
              regex      = "NULL[0-9]{1,4}"
              validation = null
            }
          }]
        }
        
        # Pattern 8: Profile with lifecycle meta-arguments
        resource "cloudflare_zero_trust_dlp_custom_profile" "prevent_destroy" {
          account_id          = var.cloudflare_account_id
          name                = "${local.name_prefix}-protected"
          description         = "This profile should not be destroyed"
          allowed_match_count = 50
        
        
          lifecycle {
            prevent_destroy = false
          }
          entries = [{
            name    = "Protected Pattern"
            enabled = true
            pattern = {
              regex = "PROTECTED[0-9]{1,4}"
            }
          }]
        }
=== RUN   TestV4ToV5Migration/zero_trust_gateway_policy
    test_runner.go:78: Output comparison failed: comparison failed:
        zero_trust_gateway_policy.tf: content mismatch:
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # Resource-specific variables with defaults
        variable "policy_prefix" {
          type    = string
          default = "test"
        }
        
        variable "enable_security_policies" {
          type    = bool
          default = true
        }
        
        variable "policy_configs" {
          type = map(object({
            action      = string
            precedence  = number
            description = string
          }))
          default = {
            allow_internal = {
              action      = "allow"
              precedence  = 100
              description = "Allow internal traffic"
            }
            block_malware = {
              action      = "block"
              precedence  = 200
              description = "Block known malware domains"
            }
            audit_api = {
              action      = "allow"
              precedence  = 300
              description = "Audit API traffic"
            }
          }
        }
        
        # Locals with multiple values
        locals {
          common_account_id         = var.cloudflare_account_id
          policy_name_prefix        = "${var.policy_prefix}-policy"
          dns_filter                = ["dns"]
          http_filter               = ["http"]
          l4_filter                 = ["l4"]
          common_traffic_expression = "any(dns.domains[*] == \"example.com\")"
          block_reason              = "Access blocked by company policy - ${var.policy_prefix}"
        }
        
        # ============================================================================
        # Pattern Group 1: Basic Resources (Edge Cases)
        # ============================================================================
        
        # 1. Minimal gateway policy
        resource "cloudflare_zero_trust_gateway_policy" "minimal" {
          account_id  = local.common_account_id
          name [32m       [0m= "cftftest Minimal Policy"
          description = "Basic block policy"
          precedence  = 100
          action      = "block"
          filters     = local.dns_filter
          traffic     = local.common_traffic_expression
        }
        
        # 2. Maximal policy with all settings
        resource "cloudflare_zero_trust_gateway_policy" "maximal" {
          account_id  = var.cloudflare_account_id
          name        = "${local.policy_name_prefix}-maximal"
          description = "Policy with all possible settings"
          precedence  = 150
          action      = "block"
          enabled     = true
          filters     = local.dns_filter
          traffic     = "any(dns.domains[*] in {\"blocked.example.com\" \"malware.example.com\"})"
        
          rule_settings = {
            block_page_enabled = true
            override_ips       = ["1.1.1.1", "1.0.0.1"]
            ip_categories      = true
            block_reason       = local.block_reason
          }
        }
        
        # 3. Policy with rule_settings and field renames
        resource "cloudflare_zero_trust_gateway_policy" "with_settings" {
          account_id  = var.cloudflare_account_id
          name[32m       [0m = "cftftest Block Policy with Settings"
          description = "Policy with custom block page"
          precedence  = 200
          action      = "block"
          enabled     = true
          filters     = ["dns"]
          traffic     = "any(dns.domains[*] in {\"blocked.example.com\" \"malware.example.com\"})"
        
          rule_settings = {
            block_page_enabled = true
            override_ips       = ["1.1.1.1", "1.0.0.1"]
            ip_categories      = true
            block_reason       = "Access to this site is blocked by company policy"
          }
        }
        
        # 4. Policy with nested blocks requiring transformation
        resource "cloudflare_zero_trust_gateway_policy" "with_nested_blocks" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest L4 Override Policy"
          description = "Policy with L4 override and notification"
          precedence  = 300
          action      = "l4_override"
          enabled     = true
          filters     = local.l4_filter
          traffic     = "net.dst.ip == 93.184.216.34"
        
          rule_settings = {
            l4override = {
              ip   = "192.168.1.100"
              port = 8080
            }
          }
        }
        
        # 5. Complex policy with multiple nested structures
        resource "cloudflare_zero_trust_gateway_policy" "complex" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest Complex Policy"
          description = "Policy with many nested settings"
          precedence  = 400
          action      = "allow"
          enabled     = true
          filters     = local.http_filter
          traffic     = "http.request.uri matches \".*api.*\""
        
          rule_settings = {
            audit_ssh = {
              command_logging = true
            }
            biso_admin_controls = {
              version          = "v1"
              disable_printing = true
              disable_download = false
            }
            check_session = {
              enforce  = true
              duration = "24h"
            }
            payload_log = {
              enabled = true
            }
          }
        }
        
        # 6. Simple allow policy for testing rule_settings
        resource "cloudflare_zero_trust_gateway_policy" "simple_resolver" {
          account_id  = var.cloudflare_account_id
          name[32m       [0m = "cftftest Simple Allow Policy"
          description = "Simple allow policy with settings"
          precedence  = 500
          action      = "allow"
          enabled     = true
          filters     = ["dns"]
          traffic     = "any(dns.domains[*] == \"allowed.example.com\")"
        
          rule_settings = {
            block_page_enabled = false
          }
        }
        
        # ============================================================================
        # Pattern Group 2: for_each with Maps
        # ============================================================================
        
        # 7-9. Resources created with for_each over map
        resource "cloudflare_zero_trust_gateway_policy" "policy_configs" {
          for_each = var.policy_configs
        
          account_id  = var.cloudflare_account_id
          name        = "${local.policy_name_prefix}-${each.key}"
          description = each.value.description
          precedence  = each.value.precedence + 5000 # Add offset to avoid conflicts
          action      = each.value.action
          enabled     = true
          filters     = ["dns"]
          traffic     = "any(dns.domains[*] == \"${each.key}.example.com\")"
        }
        
        # ============================================================================
        # Pattern Group 3: for_each with Sets
        # ============================================================================
        
        # 10-13. Resources created with for_each over set
        resource "cloudflare_zero_trust_gateway_policy" "environment_policies" {
          for_each = toset(["staging", "production", "development", "testing"])
        
          account_id  = var.cloudflare_account_id
          name        = "${local.policy_name_prefix}-${each.value}"
          description = "Policy for ${each.value} environment"
          precedence  = 600 + index(["staging", "production", "development", "testing"], each.value)
          action      = "allow"
          enabled     = true
          filters     = ["dns"]
          traffic     = "any(dns.domains[*] == \"${each.value}.example.com\")"
        }
        
        # ============================================================================
        # Pattern Group 4: count-based Resources
        # ============================================================================
        
        # 14-16. Resources created with count
        resource "cloudflare_zero_trust_gateway_policy" "tiered_policies" {
          count = 3
        
          account_id  = var.cloudflare_account_id
          name        = "${local.policy_name_prefix}-tier-${count.index}"
          description = "Tier ${count.index} policy"
          precedence  = 700 + (count.index * 10)
          action      = count.index == 0 ? "block" : "allow"
          enabled     = true
          filters     = ["dns"]
          traffic     = "any(dns.domains[*] == \"tier${count.index}.example.com\")"
        }
        
        # ============================================================================
        # Pattern Group 5: Conditional Creation
        # ============================================================================
        
        # 17. Conditionally created policy
        resource "cloudflare_zero_trust_gateway_policy" "conditional_enabled" {
          count = var.enable_security_policies ? 1 : 0
        
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest Security Policy - Enabled"
          description = "This policy is conditionally created"
          precedence  = 800
          action      = "block"
          enabled     = true
          filters     = ["dns"]
          traffic     = "any(dns.domains[*] in {\"malware.example.com\" \"phishing.example.com\"})"
        
          rule_settings = {
            block_page_enabled = true
            block_reason       = "This domain is blocked for security reasons"
          }
        }
        
        # 18. Conditionally not created policy
        resource "cloudflare_zero_trust_gateway_policy" "conditional_disabled" {
          count = var.enable_security_policies ? 0 : 1
        
          account_id  = var.cloudflare_account_id
          name[32m       [0m = "cftftest Security Policy - Disabled"
          description = "This policy is conditionally not created"
          precedence  = 900
          action      = "allow"
          enabled     = false
          filters     = ["dns"]
          traffic     = "any(dns.domains[*] == \"insecure.example.com\")"
        }
        
        # ============================================================================
        # Pattern Group 6: Terraform Functions
        # ============================================================================
        
        # 19. Policy using join() function
        resource "cloudflare_zero_trust_gateway_policy" "with_join" {
          account_id  = var.cloudflare_account_id
          name        = join("-", [local.policy_name_prefix, "joined", "policy"])
          description = "Policy created with join function"
          precedence  = 1000
          action      = "allow"
          enabled     = true
          filters     = ["dns"]
          traffic     = "any(dns.domains[*] == \"${join(".", ["subdomain", "example", "com"])}\")"
        }
        
        # 20. Policy using string interpolation
        resource "cloudflare_zero_trust_gateway_policy" "with_interpolation" {
          account_id  = var.cloudflare_account_id
          name        = "Policy for account ${var.cloudflare_account_id}"
          description = "Description with ${local.policy_name_prefix} interpolation"
          precedence  = 1100
          action      = "allow"
          enabled     = true
          filters     = ["http"]
          traffic     = "http.request.host == \"${var.policy_prefix}.example.com\""
        }
        
        # ============================================================================
        # Pattern Group 7: Lifecycle Meta-Arguments
        # ============================================================================
        
        # 21. Policy with lifecycle block
        resource "cloudflare_zero_trust_gateway_policy" "with_lifecycle" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest Protected Policy"
          description = "Policy with lifecycle settings"
          precedence  = 1200
          action      = "block"
          enabled     = true
          filters     = ["dns"]
          traffic     = "any(dns.domains[*] == \"protected.example.com\")"
        
          lifecycle {
            create_before_destroy = true
            ignore_changes        = [description]
          }
        }
        
        # 22. Policy with prevent_destroy (set to false for testing)
        resource "cloudflare_zero_trust_gateway_policy" "with_prevent_destroy" {
          account_id  = var.cloudflare_account_id
          name[32m       [0m = "cftftest Important Policy"
          description = "Critical policy"
          precedence  = 1300
          action      = "block"
          enabled     = true
          filters     = ["dns"]
          traffic     = "any(dns.domains[*] == \"critical.example.com\")"
        
          lifecycle {
            prevent_destroy = false # Set to false for testing
          }
        
          rule_settings = {
            block_page_enabled = true
            block_reason       = "Critical domain blocked"
          }
        }
        
        # ============================================================================
        # Pattern Group 8: Additional Edge Cases & Action Types
        # ============================================================================
        
        # 23. L4 Override policy with specific settings
        resource "cloudflare_zero_trust_gateway_policy" "l4_override_detailed" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest L4 Override Detailed"
          description = "Detailed L4 override configuration"
          precedence  = 1400
          action      = "l4_override"
          enabled     = true
          filters     = ["l4"]
          traffic     = "net.dst.ip == 203.0.113.1"
        
          rule_settings = {
            l4override = {
              ip   = "10.0.0.1"
              port = 9090
            }
          }
        }
        
        # 24. Policy with audit SSH settings
        resource "cloudflare_zero_trust_gateway_policy" "with_audit_ssh" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest SSH Audit Policy"
          description = "Policy with SSH auditing enabled"
          precedence  = 1500
          action      = "allow"
          enabled     = true
          filters     = ["l4"]
          traffic     = "net.dst.port == 22"
        
          rule_settings = {
            audit_ssh = {
              command_logging = true
            }
          }
        }
        
        # 25. Policy with check_session settings
        resource "cloudflare_zero_trust_gateway_policy" "with_check_session" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest Session Check Policy"
          description = "Policy with session validation"
          precedence  = 1600
          action      = "allow"
          enabled     = true
          filters     = ["http"]
          traffic     = "http.request.host == \"secure.example.com\""
        
          rule_settings = {
            check_session = {
              enforce  = true
              duration = "12h"
            }
          }
        }
        
        # 26. Policy with BISO admin controls
        resource "cloudflare_zero_trust_gateway_policy" "with_biso" {
          account_id  = var.cloudflare_account_id
          name[32m       [0m = "cftftest BISO Controls Policy"
          description = "Policy with browser isolation controls"
          precedence  = 1700
          action      = "isolate"
          enabled     = true
          filters     = ["http"]
          traffic     = "http.request.host == \"isolated.example.com\""
        
          rule_settings = {
            biso_admin_controls = {
              version          = "v2"
              disable_printing = true
              disable_download = true
            }
          }
        }
        
        # 27. Policy with payload logging
        resource "cloudflare_zero_trust_gateway_policy" "with_payload_log" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest Payload Logging Policy"
          description = "Policy with payload logging enabled"
          precedence  = 1800
          action      = "allow"
          enabled     = true
          filters     = ["http"]
          traffic     = "http.request.uri matches \".*/api/.*\""
        
          rule_settings = {
            payload_log = {
              enabled = true
            }
          }
        }
        
        # 28. Policy with override IPs
        resource "cloudflare_zero_trust_gateway_policy" "with_override_ips" {
          account_id  = var.cloudflare_account_id
          name[32m       [0m = "cftftest DNS Override Policy"
          description = "Policy with custom DNS servers"
          precedence  = 1900
          action      = "allow"
          enabled     = true
          filters     = ["dns"]
          traffic     = "any(dns.domains[*] == \"override.example.com\")"
        
          rule_settings = {
            override_ips  = ["1.1.1.1", "8.8.8.8", "9.9.9.9"]
            ip_categories = false
          }
        }
        
        # Total: 28 base resources + 3 from for_each map + 4 from for_each set + 3 from count = 38 instances
=== RUN   TestV4ToV5Migration/zero_trust_list
    test_runner.go:78: Output comparison failed: comparison failed:
        zero_trust_list.tf: content mismatch:
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # Resource-specific variables with defaults
        variable "list_prefix" {
          type    = string
          default = "test"
        }
        
        variable "enable_security_lists" {
          type    = bool
          default = true
        }
        
        variable "security_domains" {
          type = map(object({
            type        = string
            description = string
          }))
          default = {
            malware = {
              type        = "DOMAIN"
              description = "Known malware domains"
            }
            phishing = {
              type        = "DOMAIN"
              description = "Phishing sites"
            }
            spam = {
              type        = "DOMAIN"
              description = "Spam domains"
            }
          }
        }
        
        # Locals with multiple values
        locals {
          common_account_id = var.cloudflare_account_id
          list_name_prefix  = "${var.list_prefix}-list"
          ip_ranges = [
            "192.168.1.0/24",
            "10.0.0.0/8",
            "172.16.0.0/12"
          ]
          common_description = "Managed by Terraform - ${var.list_prefix}"
        }
        
        # ============================================================================
        # Pattern Group 1: Basic Resources (Edge Cases)
        # ============================================================================
        
        # 1. Minimal resource - only required fields
        resource "cloudflare_zero_trust_list" "minimal" {
          account_id = local.common_account_id
          name [32m      [0m= "cftftest Minimal List"
          type       = "IP"
          items = [{
            description = null
            value       = "192.168.1.1"
          }]
        }
        
        # 2. Maximal resource - all fields populated
        resource "cloudflare_zero_trust_list" "maximal" {
          account_id  = local.common_account_id
          name        = "${local.list_name_prefix}-maximal"
          type        = "DOMAIN"
          description = local.common_description
        
        
          items = [{
            description = "Secure subdomain"
            value       = "secure.example.com"
            }, {
            description = "Admin portal"
            value       = "admin.example.com"
            }, {
            description = null
            value       = "example.com"
            }, {
            description = null
            value       = "test.example.com"
            }, {
            description = null
            value       = "api.example.com"
          }]
        }
        
        # 3. Empty list - edge case
        resource "cloudflare_zero_trust_list" "empty" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest Empty List"
          type        = "URL"
          description = "Empty list for testing"
        }
        
        # 4. Basic IP list with simple items array
        resource "cloudflare_zero_trust_list" "ip_list" {
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest IP Allowlist"
          type       = "IP"
          items = [{
            description = null
            value       = "192.168.1.1"
            }, {
            description = null
            value       = "192.168.1.2"
            }, {
            description = null
            value       = "10.0.0.0/8"
          }]
        }
        
        # 5. Domain list with items_with_description blocks
        resource "cloudflare_zero_trust_list" "domain_list" {
          account_id  = var.cloudflare_account_id
          name[32m       [0m = "cftftest Allowed Domains"
          type        = "DOMAIN"
          description = "Company approved domains"
        
        
        
          items = [{
            description = "Main company domain"
            value       = "example.com"
            }, {
            description = "API subdomain"
            value       = "api.example.com"
            }, {
            description = "Testing environment"
            value       = "test.example.com"
          }]
        }
        
        # 6. Mixed list with both items and items_with_description
        resource "cloudflare_zero_trust_list" "email_list" {
          account_id = var.cloudflare_account_id
          name[32m      [0m = "cftftest VIP Emails"
          type       = "EMAIL"
        
        
          items = [{
            description = "CEO email address"
            value       = "ceo@example.com"
            }, {
            description = "CTO email address"
            value       = "cto@example.com"
            }, {
            description = null
            value       = "admin@example.com"
            }, {
            description = null
            value       = "security@example.com"
          }]
        }
        
        # ============================================================================
        # Pattern Group 2: for_each with Maps
        # ============================================================================
        
        # 7-9. Resources created with for_each over map
        resource "cloudflare_zero_trust_list" "security_domains" {
          for_each = var.security_domains
        
          account_id  = var.cloudflare_account_id
          name        = "${local.list_name_prefix}-${each.key}"
          type        = each.value.type
          description = each.value.description
          items = [
            {
              value       = "${each.key}.example.com"
              description = null
            },
            {
              value       = "www.${each.key}.example.com"
              description = null
            }
          ]
        }
        
        # ============================================================================
        # Pattern Group 3: for_each with Sets
        # ============================================================================
        
        # 10-13. Resources created with for_each over set
        resource "cloudflare_zero_trust_list" "list_types" {
          for_each = toset(["staging", "production", "development", "testing"])
        
          account_id  = var.cloudflare_account_id
          name        = "${local.list_name_prefix}-${each.value}"
          type        = "DOMAIN"
          description = "List for ${each.value} environment"
          items = [
            {
              value       = "${each.value}.example.com"
              description = null
            }
          ]
        }
        
        # ============================================================================
        # Pattern Group 4: count-based Resources
        # ============================================================================
        
        # 14-16. Resources created with count
        resource "cloudflare_zero_trust_list" "ip_ranges" {
          count = 3
        
          account_id  = var.cloudflare_account_id
          name        = "${local.list_name_prefix}-range-${count.index}"
          type        = "IP"
          description = "IP range ${count.index}"
          items = [
            {
              value       = local.ip_ranges[count.index]
              description = null
            }
          ]
        }
        
        # ============================================================================
        # Pattern Group 5: Conditional Creation
        # ============================================================================
        
        # 17. Conditionally created resource
        resource "cloudflare_zero_trust_list" "conditional_enabled" {
          count = var.enable_security_lists ? 1 : 0
        
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest Security List - Enabled"
          type        = "DOMAIN"
          description = "This list is conditionally created"
          items = [{
            description = null
            value       = "secure.example.com"
            }, {
            description = null
            value       = "protected.example.com"
          }]
        }
        
        # 18. Conditionally not created resource
        resource "cloudflare_zero_trust_list" "conditional_disabled" {
          count = var.enable_security_lists ? 0 : 1
        
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest Security List - Disabled"
          type        = "DOMAIN"
          description = "This list is conditionally not created"
          items = [{
            description = null
            value       = "insecure.example.com"
          }]
        }
        
        # ============================================================================
        # Pattern Group 6: Terraform Functions
        # ============================================================================
        
        # 19. Resource using join() function
        resource "cloudflare_zero_trust_list" "with_join" {
          account_id  = var.cloudflare_account_id
          name        = join("-", [local.list_name_prefix, "joined", "name"])
          type        = "DOMAIN"
          description = "List created with join function"
          items = [
            {
              value       = "${join(".", ["subdomain", "example", "com"])}"
              description = null
            }
          ]
        }
        
        # 20. Resource using string interpolation
        resource "cloudflare_zero_trust_list" "with_interpolation" {
          account_id  = var.cloudflare_account_id
          name        = "List for account ${var.cloudflare_account_id}"
          type        = "URL"
          description = "Description with ${local.list_name_prefix} interpolation"
          items = [
            {
              value       = "https://${var.list_prefix}.example.com/path"
              description = null
            }
          ]
        }
        
        # ============================================================================
        # Pattern Group 7: Lifecycle Meta-Arguments
        # ============================================================================
        
        # 21. Resource with lifecycle block
        resource "cloudflare_zero_trust_list" "with_lifecycle" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest Protected List"
          type        = "IP"
          description = "List with lifecycle settings"
        
          lifecycle {
            create_before_destroy = true
            ignore_changes        = [description]
          }
          items = [{
            description = null
            value       = "203.0.113.0/24"
          }]
        }
        
        # 22. Resource with prevent_destroy (set to false for testing)
        resource "cloudflare_zero_trust_list" "with_prevent_destroy" {
          account_id  = var.cloudflare_account_id
          name[32m       [0m = "cftftest Important List"
          type        = "DOMAIN"
          description = "Critical list"
        
          lifecycle {
            prevent_destroy = false # Set to false for testing
          }
          items = [{
            description = null
            value       = "critical.example.com"
          }]
        }
        
        # ============================================================================
        # Pattern Group 8: Additional Edge Cases & Type Coverage
        # ============================================================================
        
        # 23. URL list with only items_with_description
        resource "cloudflare_zero_trust_list" "url_list" {
          account_id = var.cloudflare_account_id
          name[32m      [0m = "cftftest Blocked URLs"
          type       = "URL"
        
        
          items = [{
            description = "Known phishing site"
            value       = "https://malicious.example.com/path"
            }, {
            description = "Spam website"
            value       = "https://spam.example.org/ads"
          }]
        }
        
        # 24. SERIAL type list
        resource "cloudflare_zero_trust_list" "serial_list" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest Certificate Serials"
          type        = "SERIAL"
          description = "Revoked certificate serial numbers"
        
          items = [{
            description = "Compromised certificate"
            value       = "DEADBEEF12345678"
            }, {
            description = null
            value       = "1234567890ABCDEF"
            }, {
            description = null
            value       = "FEDCBA0987654321"
          }]
        }
        
        # 25. List with special characters and various IP formats
        resource "cloudflare_zero_trust_list" "complex_ips" {
          account_id  = var.cloudflare_account_id
          name [32m       [0m= "cftftest Complex IP List"
          type        = "IP"
          description = "Various IP formats"
        
          items = [{
            description = "Documentation range"
            value       = "198.51.100.0/24"
            }, {
            description = null
            value       = "172.16.0.0/12"
            }, {
            description = null
            value       = "192.168.0.0/16"
            }, {
            description = null
            value       = "203.0.113.0/24"
          }]
        }
        
        # 26. EMAIL type with complex addresses
        resource "cloudflare_zero_trust_list" "complex_emails" {
          account_id  = var.cloudflare_account_id
          name[32m       [0m = "cftftest Complex Email List"
          type        = "EMAIL"
          description = "Emails with various formats"
          items = [{
            description = null
            value       = "user+tag@example.com"
            }, {
            description = null
            value       = "user.name@subdomain.example.com"
            }, {
            description = null
            value       = "admin@test.example.com"
          }]
        }
        
        # Total: 26 base resources + 3 from for_each map + 4 from for_each set + 3 from count = 36 instances
=== RUN   TestV4ToV5Migration/zero_trust_tunnel_cloudflared
    test_runner.go:78: Output comparison failed: comparison failed:
        zero_trust_tunnel_cloudflared.tf: content mismatch:
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # ========================================
        # Basic Tunnel Resources
        # ========================================
        
        
        
        
        # ========================================
        # Advanced Terraform Patterns for Testing
        # ========================================
        
        # Pattern 1: Variable references
        variable "tunnel_prefix" {
          type    = string
          default = "var-test"
        }
        
        variable "config_source" {
          type    = string
          default = "local"
        }
        
        # Pattern 2: Local values with expressions
        locals {
          tunnel_secret_base = "generated-secret-that-is-32-bytes-long"
          common_account_id  = var.cloudflare_account_id
          tunnel_suffix      = "prod"
          full_tunnel_name   = "${var.tunnel_prefix}-${local.tunnel_suffix}"
        }
        
        
        # Pattern 3: for_each with map
        variable "application_tunnels" {
          type = map(object({
            secret     = string
            config_src = string
          }))
          default = {
            "api" = {
              secret     = "api-tunnel-secret-that-is-32-bytes"
              config_src = "local"
            }
            "web" = {
              secret     = "web-tunnel-secret-that-is-32-bytes"
              config_src = "cloudflare"
            }
            "backend" = {
              secret     = "backend-secret-that-is-32-bytes-ok"
              config_src = "local"
            }
          }
        }
        
        
        # Pattern 4: for_each with list converted to set
        variable "environment_tunnels" {
          type = list(object({
            name       = string
            secret     = string
            config_src = string
          }))
          default = [
            {
              name       = "dev"
              secret     = "dev-environment-secret-32-bytes-min"
              config_src = "local"
            },
            {
              name       = "staging"
              secret     = "staging-environment-secret-32-byte"
              config_src = "cloudflare"
            },
            {
              name       = "prod"
              secret     = "prod-environment-secret-32-bytes-ok"
              config_src = "cloudflare"
            }
          ]
        }
        
        
        # Pattern 5: Count-based resources
        variable "replica_count" {
          type    = number
          default = 3
        }
        
        
        # Pattern 6: Conditional resource creation
        variable "enable_backup_tunnel" {
          type    = bool
          default = true
        }
        
        
        
        
        
        # Pattern 9: Using terraform expressions
        variable "use_cloudflare_config" {
          type    = bool
          default = false
        }
        
        
        
        
        # Pattern 12: Complex expression for config_src
        variable "is_production" {
          type    = bool
          default = true
        }
        
        # Basic tunnel with minimal configuration
        resource "cloudflare_zero_trust_tunnel_cloudflared" "minimal" {
          account_id    = var.cloudflare_account_id
          name [32m         [0m= "cftftest-minimal-tunnel"
          config_src    = "local"
          tunnel_secret = base64encode("test-secret-that-is-at-least-32-bytes-long")
        }
        # Tunnel with local config source
        resource "cloudflare_zero_trust_tunnel_cloudflared" "local_config" {
          account_id    = var.cloudflare_account_id
          name [32m         [0m= "cftftest-local-config-tunnel"
          config_src    = "local"
          tunnel_secret = base64encode("another-secret-32-bytes-or-longer-here")
        }
        # Tunnel with cloudflare config source
        resource "cloudflare_zero_trust_tunnel_cloudflared" "cloudflare_config" {
          account_id    = var.cloudflare_account_id
          name[32m         [0m = "cftftest-cloudflare-config-tunnel"
          config_src    = "cloudflare"
          tunnel_secret = base64encode("remote-tunnel-secret-32-bytes-minimum")
        }
        # Tunnel using variables and locals
        resource "cloudflare_zero_trust_tunnel_cloudflared" "with_vars" {
          account_id    = local.common_account_id
          name          = local.full_tunnel_name
          config_src    = var.config_source
          tunnel_secret = base64encode(local.tunnel_secret_base)
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "applications" {
          for_each = var.application_tunnels
        
          account_id    = var.cloudflare_account_id
          name          = "${each.key}-tunnel"
          config_src    = each.value.config_src
          tunnel_secret = base64encode(each.value.secret)
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "environments" {
          for_each = { for idx, tunnel in var.environment_tunnels : tunnel.name => tunnel }
        
          account_id    = var.cloudflare_account_id
          name          = "${each.value.name}-env-tunnel"
          config_src    = each.value.config_src
          tunnel_secret = base64encode(each.value.secret)
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "replicas" {
          count = var.replica_count
        
          account_id    = var.cloudflare_account_id
          name          = "replica-tunnel-${count.index + 1}"
          config_src    = "local"
          tunnel_secret = base64encode("replica-${count.index}-secret-32-bytes-long")
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "backup" {
          count = var.enable_backup_tunnel ? 1 : 0
        
          account_id    = var.cloudflare_account_id
          name [32m         [0m= "cftftest-backup-tunnel"
          config_src    = "cloudflare"
          tunnel_secret = base64encode("backup-tunnel-secret-32-bytes-long")
        }
        # Pattern 7: Cross-resource references
        resource "cloudflare_zero_trust_tunnel_cloudflared" "primary" {
          account_id    = var.cloudflare_account_id
          name[32m         [0m = "cftftest-primary-tunnel"
          config_src    = "local"
          tunnel_secret = base64encode("primary-tunnel-secret-32-bytes-long")
        }
        # Tunnel that references another tunnel in its name
        resource "cloudflare_zero_trust_tunnel_cloudflared" "secondary" {
          account_id    = var.cloudflare_account_id
          name          = "${cloudflare_zero_trust_tunnel_cloudflared.primary.name}-secondary"
          config_src    = "cloudflare"
          tunnel_secret = base64encode("secondary-tunnel-secret-32-bytes-ok")
        }
        # Pattern 8: Resource with lifecycle meta-arguments
        resource "cloudflare_zero_trust_tunnel_cloudflared" "protected" {
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-protected-tunnel"
          config_src = "local"
        
          lifecycle {
            prevent_destroy       = false
            create_before_destroy = true
          }
          tunnel_secret = base64encode("protected-tunnel-secret-32-bytes-ok")
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "conditional_config" {
          account_id    = var.cloudflare_account_id
          name [32m         [0m= "cftftest-conditional-config-tunnel"
          config_src    = var.use_cloudflare_config ? "cloudflare" : "local"
          tunnel_secret = base64encode("conditional-secret-32-bytes-or-more")
        }
        # Pattern 10: Tunnel with base64encode function
        resource "cloudflare_zero_trust_tunnel_cloudflared" "encoded" {
          account_id    = var.cloudflare_account_id
          name[32m         [0m = "cftftest-encoded-tunnel"
          config_src    = "local"
          tunnel_secret = base64encode("this-secret-is-base64-encoded-32b")
        }
        # Pattern 11: Tunnel using string interpolation
        resource "cloudflare_zero_trust_tunnel_cloudflared" "interpolated" {
          account_id    = var.cloudflare_account_id
          name          = "${var.tunnel_prefix}-interpolated-${local.tunnel_suffix}"
          config_src    = "local"
          tunnel_secret = base64encode("interpolated-secret-32-bytes-or-more")
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "complex_config" {
          account_id    = var.cloudflare_account_id
          name          = "${var.is_production ? "prod" : "dev"}-complex-tunnel"
          config_src    = var.is_production ? "cloudflare" : "local"
          tunnel_secret = base64encode("complex-tunnel-secret-32-bytes-long")
        }
=== RUN   TestV4ToV5Migration/zero_trust_tunnel_cloudflared_route
    test_runner.go:78: Output comparison failed: comparison failed:
        zero_trust_tunnel_cloudflared_route.tf: content mismatch:
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # ========================================
        # Tunnel Resources (Referenced by Routes Below)
        # ========================================
        # These tunnel resources are included to support cross-resource
        # references in the tunnel_route resources below
        
        
        
        
        # ========================================
        # Tunnel Resources - Advanced Patterns
        # ========================================
        
        # Variable references for tunnels
        variable "tunnel_prefix" {
          type    = string
          default = "cftftest-var-test"
        }
        
        variable "config_source" {
          type    = string
          default = "local"
        }
        
        # Local values with expressions for tunnels
        locals {
          tunnel_secret_base = "generated-secret-that-is-32-bytes-long"
          common_account_id  = var.cloudflare_account_id
          tunnel_suffix      = "prod"
          full_tunnel_name   = "${var.tunnel_prefix}-${local.tunnel_suffix}"
        }
        
        
        # for_each tunnels with map
        variable "application_tunnels" {
          type = map(object({
            secret     = string
            config_src = string
          }))
          default = {
            "api" = {
              secret     = "api-tunnel-secret-that-is-32-bytes"
              config_src = "local"
            }
            "web" = {
              secret     = "web-tunnel-secret-that-is-32-bytes"
              config_src = "cloudflare"
            }
            "backend" = {
              secret     = "backend-secret-that-is-32-bytes-ok"
              config_src = "local"
            }
          }
        }
        
        
        # for_each tunnels with list converted to set
        variable "environment_tunnels" {
          type = list(object({
            name       = string
            secret     = string
            config_src = string
          }))
          default = [
            {
              name       = "dev"
              secret     = "dev-environment-secret-32-bytes-min"
              config_src = "local"
            },
            {
              name       = "staging"
              secret     = "staging-environment-secret-32-byte"
              config_src = "cloudflare"
            },
            {
              name       = "prod"
              secret     = "prod-environment-secret-32-bytes-ok"
              config_src = "cloudflare"
            }
          ]
        }
        
        
        # Count-based tunnel resources
        variable "replica_count" {
          type    = number
          default = 3
        }
        
        
        # Conditional tunnel creation
        variable "enable_backup_tunnel" {
          type    = bool
          default = true
        }
        
        
        
        
        
        # Tunnel using terraform expressions
        variable "use_cloudflare_config" {
          type    = bool
          default = false
        }
        
        
        
        
        # Complex expression for config_src
        variable "is_production" {
          type    = bool
          default = true
        }
        
        
        # ========================================
        # Tunnel Route Resources
        # ========================================
        # These resources reference the tunnels defined above
        
        # ========================================
        # Basic Resource Configurations
        # ========================================
        
        
        
        
        
        
        # ========================================
        # Variable-Driven Configurations
        # ========================================
        
        variable "tunnel_networks" {
          type = map(object({
            network = string
            comment = string
          }))
          default = {
            "staging" = {
              network = "10.10.0.0/16"
              comment = "Staging environment"
            }
            "development" = {
              network = "10.20.0.0/16"
              comment = "Development environment"
            }
          }
        }
        
        # ========================================
        # Local Values with Expressions
        # ========================================
        
        locals {
          # Network configuration
          network_prefix = "10.100"
          base_comment   = "Automated tunnel route"
        
          # Computed values
          primary_network = "${local.network_prefix}.0.0/16"
          backup_network  = "${local.network_prefix}.128.0/17"
        
          # Tags for routes
          environment_tags  = ["production", "automated", "managed"]
          route_description = "${local.base_comment} - ${local.environment_tags[0]}"
        }
        
        # ========================================
        # Production-Like Patterns
        # ========================================
        
        
        # Pattern 2: for_each with set conversion referencing environment tunnels
        variable "additional_networks" {
          type = list(object({
            env     = string
            network = string
            comment = string
          }))
          default = [
            {
              env     = "dev"
              network = "10.30.0.0/16"
              comment = "Additional network 1"
            },
            {
              env     = "staging"
              network = "10.40.0.0/16"
              comment = "Additional network 2"
            }
          ]
        }
        
        
        # Pattern 3: Count-based resources referencing replicas
        variable "subnet_count" {
          type    = number
          default = 3
        }
        
        
        # Pattern 4: Conditional resources using locals and backup tunnel
        locals {
          enable_backup_routes = true
          backup_networks = local.enable_backup_routes ? [
            "10.200.0.0/16",
            "10.201.0.0/16"
          ] : []
        }
        
        
        # ========================================
        # Edge Cases and Complex Scenarios
        # ========================================
        
        
        
        
        
        
        
        # Basic tunnel with minimal configuration
        resource "cloudflare_zero_trust_tunnel_cloudflared" "minimal" {
          account_id    = var.cloudflare_account_id
          name [32m         [0m= "cftftest-route-minimal-tunnel"
          config_src    = "local"
          tunnel_secret = base64encode("test-secret-that-is-at-least-32-bytes-long")
        }
        # Tunnel with local config source
        resource "cloudflare_zero_trust_tunnel_cloudflared" "local_config" {
          account_id    = var.cloudflare_account_id
          name [32m         [0m= "cftftest-route-local-config-tunnel"
          config_src    = "local"
          tunnel_secret = base64encode("another-secret-32-bytes-or-longer-here")
        }
        # Tunnel with cloudflare config source
        resource "cloudflare_zero_trust_tunnel_cloudflared" "cloudflare_config" {
          account_id    = var.cloudflare_account_id
          name[32m         [0m = "cftftest-route-cloudflare-config-tunnel"
          config_src    = "cloudflare"
          tunnel_secret = base64encode("remote-tunnel-secret-32-bytes-minimum")
        }
        # Tunnel using variables and locals
        resource "cloudflare_zero_trust_tunnel_cloudflared" "with_vars" {
          account_id    = local.common_account_id
          name          = "route-${local.full_tunnel_name}"
          config_src    = var.config_source
          tunnel_secret = base64encode(local.tunnel_secret_base)
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "applications" {
          for_each = var.application_tunnels
        
          account_id    = var.cloudflare_account_id
          name          = "route-${each.key}-tunnel"
          config_src    = each.value.config_src
          tunnel_secret = base64encode(each.value.secret)
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "environments" {
          for_each = { for idx, tunnel in var.environment_tunnels : tunnel.name => tunnel }
        
          account_id    = var.cloudflare_account_id
          name          = "route-${each.value.name}-env-tunnel"
          config_src    = each.value.config_src
          tunnel_secret = base64encode(each.value.secret)
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "replicas" {
          count = var.replica_count
        
          account_id    = var.cloudflare_account_id
          name          = "route-replica-tunnel-${count.index + 1}"
          config_src    = "local"
          tunnel_secret = base64encode("replica-${count.index}-secret-32-bytes-long")
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "backup" {
          count = var.enable_backup_tunnel ? 1 : 0
        
          account_id    = var.cloudflare_account_id
          name [32m         [0m= "cftftest-route-backup-tunnel"
          config_src    = "cloudflare"
          tunnel_secret = base64encode("backup-tunnel-secret-32-bytes-long")
        }
        # Cross-resource references between tunnels
        resource "cloudflare_zero_trust_tunnel_cloudflared" "primary" {
          account_id    = var.cloudflare_account_id
          name [32m         [0m= "cftftest-route-primary-tunnel"
          config_src    = "local"
          tunnel_secret = base64encode("primary-tunnel-secret-32-bytes-long")
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "secondary" {
          account_id    = var.cloudflare_account_id
          name          = "${cloudflare_zero_trust_tunnel_cloudflared.primary.name}-secondary"
          config_src    = "cloudflare"
          tunnel_secret = base64encode("secondary-tunnel-secret-32-bytes-ok")
        }
        # Tunnel with lifecycle meta-arguments
        resource "cloudflare_zero_trust_tunnel_cloudflared" "protected" {
          account_id = var.cloudflare_account_id
          name [32m      [0m= "cftftest-route-protected-tunnel"
          config_src = "local"
        
          lifecycle {
            prevent_destroy       = false
            create_before_destroy = true
          }
          tunnel_secret = base64encode("protected-tunnel-secret-32-bytes-ok")
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "conditional_config" {
          account_id    = var.cloudflare_account_id
          name [32m         [0m= "cftftest-route-conditional-config-tunnel"
          config_src    = var.use_cloudflare_config ? "cloudflare" : "local"
          tunnel_secret = base64encode("conditional-secret-32-bytes-or-more")
        }
        # Tunnel with base64encode function
        resource "cloudflare_zero_trust_tunnel_cloudflared" "encoded" {
          account_id    = var.cloudflare_account_id
          name[32m         [0m = "cftftest-route-encoded-tunnel"
          config_src    = "local"
          tunnel_secret = base64encode("this-secret-is-base64-encoded-32b")
        }
        # Tunnel using string interpolation
        resource "cloudflare_zero_trust_tunnel_cloudflared" "interpolated" {
          account_id    = var.cloudflare_account_id
          name          = "route-${var.tunnel_prefix}-interpolated-${local.tunnel_suffix}"
          config_src    = "local"
          tunnel_secret = base64encode("interpolated-secret-32-bytes-or-more")
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared" "complex_config" {
          account_id    = var.cloudflare_account_id
          name          = "route-${var.is_production ? "prod" : "dev"}-complex-tunnel"
          config_src    = var.is_production ? "cloudflare" : "local"
          tunnel_secret = base64encode("complex-tunnel-secret-32-bytes-long")
        }
        # Test Case 1: Minimal resource referencing minimal tunnel
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "minimal" {
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.minimal.id
          network    = "10.0.0.0/16"
        }
        # Test Case 2: Full resource with all optional fields referencing local_config tunnel
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "full" {
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.local_config.id
          network    = "172.16.0.0/12"
          comment    = "Production tunnel route for internal services"
        }
        # Test Case 3: IPv6 network with comment referencing cloudflare_config tunnel
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "ipv6" {
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.cloudflare_config.id
          network    = "2001:db8::/32"
          comment    = "IPv6 tunnel route"
        }
        # Test Case 4: Empty comment referencing with_vars tunnel
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "empty_comment" {
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.with_vars.id
          network    = "192.168.0.0/16"
          comment    = ""
        }
        # Test Case 5: Special characters in comment referencing primary tunnel
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "special_chars" {
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.primary.id
          network    = "10.1.0.0/16"
          comment    = "Route with special chars: !@#$%^&*() and unicode: Ã©Ã§Ã "
        }
        # Pattern 1: for_each with map referencing applications tunnels
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "environment_routes" {
          for_each = var.tunnel_networks
        
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.applications[each.key == "staging" ? "api" : "web"].id
          network    = each.value.network
          comment    = "${each.key}: ${each.value.comment}"
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "additional_routes" {
          for_each = { for idx, net in var.additional_networks : net.network => net }
        
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.environments[each.value.env].id
          network    = each.value.network
          comment    = each.value.comment
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "subnet_routes" {
          count = var.subnet_count
        
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.replicas[count.index].id
          network    = "10.${count.index + 50}.0.0/24"
          comment    = "Subnet ${count.index + 1} route"
        }
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "backup_routes" {
          for_each = toset(local.backup_networks)
        
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.backup[0].id
          network    = each.value
          comment    = "Backup route for ${each.value}"
        }
        # Test Case 6: Private IPv4 ranges referencing secondary tunnel
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "private_ranges" {
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.secondary.id
          network    = "172.31.0.0/16"
          comment    = "Private range 172.16.0.0/12"
        }
        # Test Case 7: Large CIDR (small subnet) referencing protected tunnel
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "small_subnet" {
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.protected.id
          network    = "192.168.1.0/28"
          comment    = "Small subnet /28"
        }
        # Test Case 8: IPv6 with virtual network referencing conditional_config tunnel
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "ipv6_with_vnet" {
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.conditional_config.id
          network    = "fd00::/8"
          comment    = "IPv6 private network"
        }
        # Test Case 9: Multiple character encodings in comment referencing encoded tunnel
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "unicode_comment" {
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.encoded.id
          network    = "10.250.0.0/16"
          comment    = "Multi-language: English, EspaÃ±ol, ä¸­æ–‡, Ð ÑƒÑÑÐºÐ¸Ð¹, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"
        }
        # Test Case 10: Comment at max length (100 chars) referencing interpolated tunnel
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "long_comment" {
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.interpolated.id
          network    = "10.255.0.0/16"
          comment    = "This comment is exactly one hundred characters long to test the maximum API length constraint limit"
        }
        # Test Case 11: Computed values with expressions referencing complex_config tunnel
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "computed_values" {
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.complex_config.id
          network    = "10.60.0.0/16"
          comment    = "Computed from locals"
        }
        # Test Case 12: Route with cross-reference to tunnel name
        resource "cloudflare_zero_trust_tunnel_cloudflared_route" "cross_reference" {
          account_id = var.cloudflare_account_id
          tunnel_id  = cloudflare_zero_trust_tunnel_cloudflared.minimal.id
          network    = "10.245.0.0/16"
          comment    = "Route for tunnel: ${cloudflare_zero_trust_tunnel_cloudflared.minimal.name}"
        }
=== RUN   TestV4ToV5Migration/zone
    test_runner.go:78: Output comparison failed: comparison failed:
        zone.tf: content mismatch:
        # Comprehensive Zone Migration Integration Test
        # Covers all Terraform patterns and zone-specific edge cases
        
        # ========================================
        # Variables
        # ========================================
        variable "cloudflare_account_id" {
          description = "Cloudflare account ID"
          type        = string
        }
        
        variable "cloudflare_zone_id" {
          description = "Cloudflare zone ID"
          type        = string
        }
        
        # ========================================
        # Pattern Group 1: Locals
        # ========================================
        
        locals {
          common_account = var.cloudflare_account_id
          name_prefix [32m   [0m= "cftftest"
          zone_types     = ["full", "partial", "secondary"]
          test_domains   = ["example.com", "test.com", "demo.com"]
        }
        
        # ========================================
        # Pattern Group 2: Basic Zone Configurations
        # ========================================
        
        # Test Case 1: Minimal zone (only required fields)
        resource "cloudflare_zone" "minimal" {
          name = "cftftest-minimal.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        # Test Case 2: Zone with paused = true
        resource "cloudflare_zone" "paused_zone" {
          paused = true
          type   = "full"
          name[32m  [0m = "cftftest-paused.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        # ========================================
        # Pattern Group 3: for_each with Maps
        # ========================================
        
        resource "cloudflare_zone" "map_zones" {
          for_each = {
            "prod" = {
              domain = "cftftest-prod.example.com"
              type   = "full"
              paused = false
            }
            "staging" = {
              domain = "cftftest-staging.example.com"
              type   = "full"
              paused = false
            }
            # "dev" = {
            #   domain = "cftftest-dev.example.com"
            #   type   = "partial"
            #   paused = true
            # }
          }
        
          type   = each.value.type
          paused = each.value.paused
          name   = each.value.domain
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        # ========================================
        # Pattern Group 4: for_each with Sets
        # ========================================
        
        resource "cloudflare_zone" "set_zones" {
          for_each = toset([
            "cftftest-alpha.example.com",
            "cftftest-beta.example.com",
            "cftftest-gamma.example.com",
            "cftftest-delta.example.com"
          ])
        
          type = "full"
          name = each.value
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        # ========================================
        # Pattern Group 5: count-based Resources
        # ========================================
        
        resource "cloudflare_zone" "counted_zones" {
          count = 3
        
          type   = "full"
          paused = count.index == 1 ? true : false
          name[32m  [0m = "cftftest-zone-${count.index}.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        # ========================================
        # Pattern Group 6: Conditional Creation
        # ========================================
        
        locals {
          enable_test_zone    = true
          enable_feature_zone = false
        }
        
        resource "cloudflare_zone" "conditional_enabled" {
          count = local.enable_test_zone ? 1 : 0
        
          type = "full"
          name = "cftftest-conditional-enabled.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        resource "cloudflare_zone" "conditional_disabled" {
          count = local.enable_feature_zone ? 1 : 0
        
          type = "full"
          name = "cftftest-conditional-disabled.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        # ========================================
        # Pattern Group 7: Terraform Functions
        # ========================================
        
        resource "cloudflare_zone" "with_functions" {
          type = "full"
          name = join("-", ["cftftest", "function", "test.example.com"])
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        resource "cloudflare_zone" "with_interpolation" {
          type   = "full"
          paused = false
          name   = "${local.name_prefix}-interpolated.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        resource "cloudflare_zone" "with_locals" {
          type = local.zone_types[0]
          name = "cftftest-with-locals.example.com"
          account = {
            id = local.common_account
          }
        }
        
        # ========================================
        # Pattern Group 8: Lifecycle Meta-Arguments
        # ========================================
        
        resource "cloudflare_zone" "with_lifecycle" {
          type   = "full"
          paused = false
        
          lifecycle {
            create_before_destroy = true
          }
          name = "cftftest-lifecycle-test.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        resource "cloudflare_zone" "with_ignore_changes" {
          type = "full"
        
          lifecycle {
            ignore_changes = [paused]
          }
          name = "cftftest-ignore-changes.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        resource "cloudflare_zone" "with_prevent_destroy" {
          type = "full"
        
          lifecycle {
            prevent_destroy = false
          }
          name = "cftftest-prevent-destroy.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        # ========================================
        # Pattern Group 9: Edge Cases
        # ========================================
        
        # Test Case: Hyphenated domain
        resource "cloudflare_zone" "hyphenated_domain" {
          type = "full"
          name = "cftftest-hyphen-domain.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        # Test Case: Subdomain with many levels
        resource "cloudflare_zone" "deep_subdomain" {
          type = "full"
          name = "cftftest-level4.level3.level2.level1.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        # Test Case: Zone with removed attributes (jump_start and plan)
        resource "cloudflare_zone" "with_removed_attrs" {
          type = "full"
          name = "cftftest-removed-attrs.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        # Test Case: Zone with all plan types
        resource "cloudflare_zone" "with_pro_plan" {
          type = "full"
          name = "cftftest-pro-plan.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        resource "cloudflare_zone" "with_business_plan" {
          type = "full"
          name = "cftftest-business-plan.example.com"
          account = {
            id = var.cloudflare_account_id
          }
        }
        
        # ========================================
        # Total Resource Count Summary
        # ========================================
        # Minimal: 1
        # Basic variations: 2 (paused, removed_attrs)
        # for_each with maps: 2 instances (prod, staging)
        # for_each with sets: 4 instances
        # count-based: 3 instances
        # Conditional: 1 instance (enabled only)
        # With functions: 3 instances
        # Lifecycle: 3 instances
        # Edge cases: 4 instances (hyphenated, deep, plan variations)
        # TOTAL: 23 resource instances
        #
        # REMOVED (require Business/Enterprise plans):
        # - maximal (vanity name servers)
        # - partial_zone (partial zone type)
        # - secondary_zone (secondary zone type)
        # - with_vanity_ns (vanity name servers)
        # - map_zones["dev"] (partial zone type)
        # - unicode_domain (commented out by linter)
=== RUN   TestV4ToV5Migration/zone_datasource
=== RUN   TestV4ToV5Migration/zone_dnssec
=== RUN   TestV4ToV5Migration/zones_datasource
--- FAIL: TestV4ToV5Migration (19.66s)
    --- PASS: TestV4ToV5Migration/account_member (1.05s)
    --- FAIL: TestV4ToV5Migration/api_token (0.78s)
    --- FAIL: TestV4ToV5Migration/dns_record (0.82s)
    --- PASS: TestV4ToV5Migration/logpull_retention (0.88s)
    --- FAIL: TestV4ToV5Migration/logpush_job (0.84s)
    --- FAIL: TestV4ToV5Migration/notification_policy_webhooks (0.47s)
    --- FAIL: TestV4ToV5Migration/pages_project (0.73s)
    --- PASS: TestV4ToV5Migration/r2_bucket (1.08s)
    --- FAIL: TestV4ToV5Migration/workers_kv (0.72s)
    --- PASS: TestV4ToV5Migration/workers_kv_namespace (0.46s)
    --- FAIL: TestV4ToV5Migration/zero_trust_access_service_token (0.78s)
    --- FAIL: TestV4ToV5Migration/zero_trust_device_posture_rule (0.81s)
    --- FAIL: TestV4ToV5Migration/zero_trust_dlp_custom_profile (0.51s)
    --- FAIL: TestV4ToV5Migration/zero_trust_gateway_policy (0.74s)
    --- FAIL: TestV4ToV5Migration/zero_trust_list (0.97s)
    --- FAIL: TestV4ToV5Migration/zero_trust_tunnel_cloudflared (0.73s)
    --- FAIL: TestV4ToV5Migration/zero_trust_tunnel_cloudflared_route (4.12s)
    --- FAIL: TestV4ToV5Migration/zone (1.19s)
    --- PASS: TestV4ToV5Migration/zone_datasource (0.72s)
    --- PASS: TestV4ToV5Migration/zone_dnssec (0.50s)
    --- PASS: TestV4ToV5Migration/zones_datasource (0.74s)
=== RUN   TestSingleResource
    integration_test.go:80: TEST_RESOURCE not set, skipping single resource test
--- SKIP: TestSingleResource (0.00s)
FAIL
FAIL	github.com/cloudflare/tf-migrate/integration/v4_to_v5	20.455s
=== RUN   TestVersionBasedMigratorSelection
--- PASS: TestVersionBasedMigratorSelection (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal	(cached)
=== RUN   TestConfigTransformation
=== RUN   TestConfigTransformation/zone_id_only_-_no_changes
=== RUN   TestConfigTransformation/name_only_-_wrap_in_filter
=== RUN   TestConfigTransformation/account_id_only_-_wrap_in_filter
=== RUN   TestConfigTransformation/name_and_account_id_-_both_in_filter
=== RUN   TestConfigTransformation/with_variable_references
=== RUN   TestConfigTransformation/multiple_datasources_in_one_file
--- PASS: TestConfigTransformation (0.01s)
    --- PASS: TestConfigTransformation/zone_id_only_-_no_changes (0.00s)
    --- PASS: TestConfigTransformation/name_only_-_wrap_in_filter (0.00s)
    --- PASS: TestConfigTransformation/account_id_only_-_wrap_in_filter (0.00s)
    --- PASS: TestConfigTransformation/name_and_account_id_-_both_in_filter (0.00s)
    --- PASS: TestConfigTransformation/with_variable_references (0.00s)
    --- PASS: TestConfigTransformation/multiple_datasources_in_one_file (0.00s)
=== RUN   TestStateTransformation
=== RUN   TestStateTransformation/minimal_state
=== RUN   TestStateTransformation/full_state_with_all_v4_fields
--- PASS: TestStateTransformation (0.00s)
    --- PASS: TestStateTransformation/minimal_state (0.00s)
    --- PASS: TestStateTransformation/full_state_with_all_v4_fields (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/datasources/zone	(cached)
=== RUN   TestConfigTransformation
=== RUN   TestConfigTransformation/filter_with_account_id_only
=== RUN   TestConfigTransformation/filter_with_name_only
=== RUN   TestConfigTransformation/filter_with_status_only
=== RUN   TestConfigTransformation/filter_with_account_id_and_name
=== RUN   TestConfigTransformation/filter_with_all_supported_fields
=== RUN   TestConfigTransformation/filter_with_dropped_fields_(lookup_type,_match,_paused)
=== RUN   TestConfigTransformation/variable_references_preserved
=== RUN   TestConfigTransformation/local_references_preserved
=== RUN   TestConfigTransformation/multiple_datasources
--- PASS: TestConfigTransformation (0.02s)
    --- PASS: TestConfigTransformation/filter_with_account_id_only (0.00s)
    --- PASS: TestConfigTransformation/filter_with_name_only (0.00s)
    --- PASS: TestConfigTransformation/filter_with_status_only (0.00s)
    --- PASS: TestConfigTransformation/filter_with_account_id_and_name (0.00s)
    --- PASS: TestConfigTransformation/filter_with_all_supported_fields (0.00s)
    --- PASS: TestConfigTransformation/filter_with_dropped_fields_(lookup_type,_match,_paused) (0.00s)
    --- PASS: TestConfigTransformation/variable_references_preserved (0.00s)
    --- PASS: TestConfigTransformation/local_references_preserved (0.00s)
    --- PASS: TestConfigTransformation/multiple_datasources (0.00s)
=== RUN   TestStateTransformation
=== RUN   TestStateTransformation/zones_array_to_result_array
=== RUN   TestStateTransformation/empty_zones_array
=== RUN   TestStateTransformation/null_zones_field
=== RUN   TestStateTransformation/minimal_state_with_no_zones
--- PASS: TestStateTransformation (0.00s)
    --- PASS: TestStateTransformation/zones_array_to_result_array (0.00s)
    --- PASS: TestStateTransformation/empty_zones_array (0.00s)
    --- PASS: TestStateTransformation/null_zones_field (0.00s)
    --- PASS: TestStateTransformation/minimal_state_with_no_zones (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/datasources/zones	(cached)
=== RUN   TestFormatterHandler
=== RUN   TestFormatterHandler/Format_simple_resource
=== RUN   TestFormatterHandler/Format_multiple_resources
=== RUN   TestFormatterHandler/Format_nested_blocks
=== RUN   TestFormatterHandler/Format_empty_file
=== RUN   TestFormatterHandler/Format_with_comments_preserved
=== RUN   TestFormatterHandler/Format_data_source
=== RUN   TestFormatterHandler/Format_with_various_attribute_types
--- PASS: TestFormatterHandler (0.00s)
    --- PASS: TestFormatterHandler/Format_simple_resource (0.00s)
    --- PASS: TestFormatterHandler/Format_multiple_resources (0.00s)
    --- PASS: TestFormatterHandler/Format_nested_blocks (0.00s)
    --- PASS: TestFormatterHandler/Format_empty_file (0.00s)
    --- PASS: TestFormatterHandler/Format_with_comments_preserved (0.00s)
    --- PASS: TestFormatterHandler/Format_data_source (0.00s)
    --- PASS: TestFormatterHandler/Format_with_various_attribute_types (0.00s)
=== RUN   TestFormatterHandlerRequiresAST
--- PASS: TestFormatterHandlerRequiresAST (0.00s)
=== RUN   TestFormatterHandlerChaining
--- PASS: TestFormatterHandlerChaining (0.00s)
=== RUN   TestFormatterPreservesAST
--- PASS: TestFormatterPreservesAST (0.00s)
=== RUN   TestFormatterSpecialCharacters
--- PASS: TestFormatterSpecialCharacters (0.00s)
=== RUN   TestParseHandler
=== RUN   TestParseHandler/Valid_HCL_parsing
=== RUN   TestParseHandler/Multiple_resources
=== RUN   TestParseHandler/Invalid_HCL_syntax_-_missing_closing_brace
=== RUN   TestParseHandler/Invalid_HCL_syntax_-_malformed_attribute
=== RUN   TestParseHandler/Empty_file
=== RUN   TestParseHandler/File_with_only_comments
=== RUN   TestParseHandler/Complex_nested_structure
--- PASS: TestParseHandler (0.00s)
    --- PASS: TestParseHandler/Valid_HCL_parsing (0.00s)
    --- PASS: TestParseHandler/Multiple_resources (0.00s)
    --- PASS: TestParseHandler/Invalid_HCL_syntax_-_missing_closing_brace (0.00s)
    --- PASS: TestParseHandler/Invalid_HCL_syntax_-_malformed_attribute (0.00s)
    --- PASS: TestParseHandler/Empty_file (0.00s)
    --- PASS: TestParseHandler/File_with_only_comments (0.00s)
    --- PASS: TestParseHandler/Complex_nested_structure (0.00s)
=== RUN   TestParseHandlerPreservesContent
--- PASS: TestParseHandlerPreservesContent (0.00s)
=== RUN   TestParseHandlerChaining
--- PASS: TestParseHandlerChaining (0.00s)
=== RUN   TestPreprocessHandler
=== RUN   TestPreprocessHandler/No_registered_resources
=== RUN   TestPreprocessHandler/Single_resource_preprocessor
=== RUN   TestPreprocessHandler/Multiple_resource_preprocessors_applied_in_order
=== RUN   TestPreprocessHandler/Preprocessor_that_returns_content_unchanged
--- PASS: TestPreprocessHandler (0.00s)
    --- PASS: TestPreprocessHandler/No_registered_resources (0.00s)
    --- PASS: TestPreprocessHandler/Single_resource_preprocessor (0.00s)
    --- PASS: TestPreprocessHandler/Multiple_resource_preprocessors_applied_in_order (0.00s)
    --- PASS: TestPreprocessHandler/Preprocessor_that_returns_content_unchanged (0.00s)
=== RUN   TestPreprocessHandlerCallsAllRegisteredPreprocessors
--- PASS: TestPreprocessHandlerCallsAllRegisteredPreprocessors (0.00s)
=== RUN   TestResourceTransformHandler
=== RUN   TestResourceTransformHandler/Transform_single_resource
=== RUN   TestResourceTransformHandler/Remove_resource_entirely
=== RUN   TestResourceTransformHandler/Split_resource_into_multiple
=== RUN   TestResourceTransformHandler/In-place_modification
=== RUN   TestResourceTransformHandler/No_transformer_for_resource_type
=== RUN   TestResourceTransformHandler/Transformer_returns_error
2025-12-04T18:45:30.035Z [ERROR] Error transforming resource: type=error_resource error="transformation failed"
=== RUN   TestResourceTransformHandler/Multiple_transformers_for_different_resources
--- PASS: TestResourceTransformHandler (0.00s)
    --- PASS: TestResourceTransformHandler/Transform_single_resource (0.00s)
    --- PASS: TestResourceTransformHandler/Remove_resource_entirely (0.00s)
    --- PASS: TestResourceTransformHandler/Split_resource_into_multiple (0.00s)
    --- PASS: TestResourceTransformHandler/In-place_modification (0.00s)
    --- PASS: TestResourceTransformHandler/No_transformer_for_resource_type (0.00s)
    --- PASS: TestResourceTransformHandler/Transformer_returns_error (0.00s)
    --- PASS: TestResourceTransformHandler/Multiple_transformers_for_different_resources (0.00s)
=== RUN   TestResourceTransformHandlerRequiresAST
--- PASS: TestResourceTransformHandlerRequiresAST (0.00s)
=== RUN   TestResourceTransformHandlerMetadata
--- PASS: TestResourceTransformHandlerMetadata (0.00s)
=== RUN   TestStateFormatterHandler
=== RUN   TestStateFormatterHandler/Format_valid_JSON_state
=== RUN   TestStateFormatterHandler/Handle_already_formatted_JSON
=== RUN   TestStateFormatterHandler/Leave_invalid_JSON_unchanged
=== RUN   TestStateFormatterHandler/Handle_empty_content
--- PASS: TestStateFormatterHandler (0.00s)
    --- PASS: TestStateFormatterHandler/Format_valid_JSON_state (0.00s)
    --- PASS: TestStateFormatterHandler/Handle_already_formatted_JSON (0.00s)
    --- PASS: TestStateFormatterHandler/Leave_invalid_JSON_unchanged (0.00s)
    --- PASS: TestStateFormatterHandler/Handle_empty_content (0.00s)
=== RUN   TestStateFormatterHandlerChaining
--- PASS: TestStateFormatterHandlerChaining (0.00s)
=== RUN   TestStateTransformHandler
=== RUN   TestStateTransformHandler/Transform_simple_state_resource
=== RUN   TestStateTransformHandler/Handle_invalid_JSON
=== RUN   TestStateTransformHandler/Handle_empty_state
2025-12-04T18:45:30.038Z [WARN]  No resources found in state file
=== RUN   TestStateTransformHandler/Skip_resources_without_strategy
--- PASS: TestStateTransformHandler (0.00s)
    --- PASS: TestStateTransformHandler/Transform_simple_state_resource (0.00s)
    --- PASS: TestStateTransformHandler/Handle_invalid_JSON (0.00s)
    --- PASS: TestStateTransformHandler/Handle_empty_state (0.00s)
    --- PASS: TestStateTransformHandler/Skip_resources_without_strategy (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/handlers	(cached)
=== RUN   TestAttributesOrdered
=== RUN   TestAttributesOrdered/Attributes_in_specific_order
=== RUN   TestAttributesOrdered/Mixed_attributes_and_blocks
=== RUN   TestAttributesOrdered/Empty_body
=== RUN   TestAttributesOrdered/Attributes_with_complex_values
--- PASS: TestAttributesOrdered (0.00s)
    --- PASS: TestAttributesOrdered/Attributes_in_specific_order (0.00s)
    --- PASS: TestAttributesOrdered/Mixed_attributes_and_blocks (0.00s)
    --- PASS: TestAttributesOrdered/Empty_body (0.00s)
    --- PASS: TestAttributesOrdered/Attributes_with_complex_values (0.00s)
=== RUN   TestBuildTemplateStringTokens
=== RUN   TestBuildTemplateStringTokens/Simple_variable_interpolation
=== RUN   TestBuildTemplateStringTokens/No_suffix
=== RUN   TestBuildTemplateStringTokens/Resource_reference_with_suffix
--- PASS: TestBuildTemplateStringTokens (0.00s)
    --- PASS: TestBuildTemplateStringTokens/Simple_variable_interpolation (0.00s)
    --- PASS: TestBuildTemplateStringTokens/No_suffix (0.00s)
    --- PASS: TestBuildTemplateStringTokens/Resource_reference_with_suffix (0.00s)
=== RUN   TestBuildResourceReference
=== RUN   TestBuildResourceReference/Standard_resource_reference
=== RUN   TestBuildResourceReference/Resource_with_underscores
=== RUN   TestBuildResourceReference/Short_names
--- PASS: TestBuildResourceReference (0.00s)
    --- PASS: TestBuildResourceReference/Standard_resource_reference (0.00s)
    --- PASS: TestBuildResourceReference/Resource_with_underscores (0.00s)
    --- PASS: TestBuildResourceReference/Short_names (0.00s)
=== RUN   TestCreateMovedBlock
=== RUN   TestCreateMovedBlock/Simple_resource_move
=== RUN   TestCreateMovedBlock/Module_resource_move
=== RUN   TestCreateMovedBlock/Resource_with_index
--- PASS: TestCreateMovedBlock (0.00s)
    --- PASS: TestCreateMovedBlock/Simple_resource_move (0.00s)
    --- PASS: TestCreateMovedBlock/Module_resource_move (0.00s)
    --- PASS: TestCreateMovedBlock/Resource_with_index (0.00s)
=== RUN   TestCreateImportBlock
=== RUN   TestCreateImportBlock/Simple_import_block
=== RUN   TestCreateImportBlock/Import_with_special_characters
--- PASS: TestCreateImportBlock (0.00s)
    --- PASS: TestCreateImportBlock/Simple_import_block (0.00s)
    --- PASS: TestCreateImportBlock/Import_with_special_characters (0.00s)
=== RUN   TestCreateImportBlockWithTokens
=== RUN   TestCreateImportBlockWithTokens/Import_with_variable_ID
=== RUN   TestCreateImportBlockWithTokens/Import_with_concatenated_ID
--- PASS: TestCreateImportBlockWithTokens (0.00s)
    --- PASS: TestCreateImportBlockWithTokens/Import_with_variable_ID (0.00s)
    --- PASS: TestCreateImportBlockWithTokens/Import_with_concatenated_ID (0.00s)
=== RUN   TestBuildObjectFromBlock
=== RUN   TestBuildObjectFromBlock/Simple_block_to_object
=== RUN   TestBuildObjectFromBlock/Block_with_various_types
=== RUN   TestBuildObjectFromBlock/Empty_block
--- PASS: TestBuildObjectFromBlock (0.00s)
    --- PASS: TestBuildObjectFromBlock/Simple_block_to_object (0.00s)
    --- PASS: TestBuildObjectFromBlock/Block_with_various_types (0.00s)
    --- PASS: TestBuildObjectFromBlock/Empty_block (0.00s)
=== RUN   TestSetAttributeValue
=== RUN   TestSetAttributeValue/String_value
=== RUN   TestSetAttributeValue/Integer_value
=== RUN   TestSetAttributeValue/Int64_value
=== RUN   TestSetAttributeValue/Float_value
=== RUN   TestSetAttributeValue/Boolean_true
=== RUN   TestSetAttributeValue/Boolean_false
=== RUN   TestSetAttributeValue/String_slice
=== RUN   TestSetAttributeValue/Empty_string_slice
=== RUN   TestSetAttributeValue/String_map
=== RUN   TestSetAttributeValue/Empty_map
--- PASS: TestSetAttributeValue (0.00s)
    --- PASS: TestSetAttributeValue/String_value (0.00s)
    --- PASS: TestSetAttributeValue/Integer_value (0.00s)
    --- PASS: TestSetAttributeValue/Int64_value (0.00s)
    --- PASS: TestSetAttributeValue/Float_value (0.00s)
    --- PASS: TestSetAttributeValue/Boolean_true (0.00s)
    --- PASS: TestSetAttributeValue/Boolean_false (0.00s)
    --- PASS: TestSetAttributeValue/String_slice (0.00s)
    --- PASS: TestSetAttributeValue/Empty_string_slice (0.00s)
    --- PASS: TestSetAttributeValue/String_map (0.00s)
    --- PASS: TestSetAttributeValue/Empty_map (0.00s)
=== RUN   TestCopyAttribute
=== RUN   TestCopyAttribute/Copy_simple_attribute
=== RUN   TestCopyAttribute/Copy_complex_attribute
=== RUN   TestCopyAttribute/Copy_non-existent_attribute
=== RUN   TestCopyAttribute/Copy_expression_attribute
--- PASS: TestCopyAttribute (0.00s)
    --- PASS: TestCopyAttribute/Copy_simple_attribute (0.00s)
    --- PASS: TestCopyAttribute/Copy_complex_attribute (0.00s)
    --- PASS: TestCopyAttribute/Copy_non-existent_attribute (0.00s)
    --- PASS: TestCopyAttribute/Copy_expression_attribute (0.00s)
=== RUN   TestRemoveEmptyBlocks
=== RUN   TestRemoveEmptyBlocks/Remove_empty_data_blocks
=== RUN   TestRemoveEmptyBlocks/Keep_non-empty_blocks
=== RUN   TestRemoveEmptyBlocks/No_blocks_to_remove
=== RUN   TestRemoveEmptyBlocks/Remove_all_empty_blocks_of_type
--- PASS: TestRemoveEmptyBlocks (0.00s)
    --- PASS: TestRemoveEmptyBlocks/Remove_empty_data_blocks (0.00s)
    --- PASS: TestRemoveEmptyBlocks/Keep_non-empty_blocks (0.00s)
    --- PASS: TestRemoveEmptyBlocks/No_blocks_to_remove (0.00s)
    --- PASS: TestRemoveEmptyBlocks/Remove_all_empty_blocks_of_type (0.00s)
=== RUN   TestTokensForSimpleValue
=== RUN   TestTokensForSimpleValue/String_value
=== RUN   TestTokensForSimpleValue/Integer_value
=== RUN   TestTokensForSimpleValue/Int64_value
=== RUN   TestTokensForSimpleValue/Float_value
=== RUN   TestTokensForSimpleValue/Boolean_true
=== RUN   TestTokensForSimpleValue/Boolean_false
=== RUN   TestTokensForSimpleValue/Unsupported_type_returns_nil
=== RUN   TestTokensForSimpleValue/Nil_value_returns_nil
--- PASS: TestTokensForSimpleValue (0.00s)
    --- PASS: TestTokensForSimpleValue/String_value (0.00s)
    --- PASS: TestTokensForSimpleValue/Integer_value (0.00s)
    --- PASS: TestTokensForSimpleValue/Int64_value (0.00s)
    --- PASS: TestTokensForSimpleValue/Float_value (0.00s)
    --- PASS: TestTokensForSimpleValue/Boolean_true (0.00s)
    --- PASS: TestTokensForSimpleValue/Boolean_false (0.00s)
    --- PASS: TestTokensForSimpleValue/Unsupported_type_returns_nil (0.00s)
    --- PASS: TestTokensForSimpleValue/Nil_value_returns_nil (0.00s)
=== RUN   TestSetAttributeValueComplexType
--- PASS: TestSetAttributeValueComplexType (0.00s)
=== RUN   TestAttributeValueWithCtyTypes
--- PASS: TestAttributeValueWithCtyTypes (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/hcl	(cached)
?   	github.com/cloudflare/tf-migrate/internal/logger	[no test files]
=== RUN   TestPipelineEndToEnd
=== RUN   TestPipelineEndToEnd/Simple_resource_transformation
=== RUN   TestPipelineEndToEnd/Multiple_resource_transformation
=== RUN   TestPipelineEndToEnd/No_transformation_needed
=== RUN   TestPipelineEndToEnd/Invalid_HCL_syntax
--- PASS: TestPipelineEndToEnd (0.00s)
    --- PASS: TestPipelineEndToEnd/Simple_resource_transformation (0.00s)
    --- PASS: TestPipelineEndToEnd/Multiple_resource_transformation (0.00s)
    --- PASS: TestPipelineEndToEnd/No_transformation_needed (0.00s)
    --- PASS: TestPipelineEndToEnd/Invalid_HCL_syntax (0.00s)
=== RUN   TestTransformerCallOrder
--- PASS: TestTransformerCallOrder (0.00s)
=== RUN   TestResourceTransformationWithRemoval
--- PASS: TestResourceTransformationWithRemoval (0.00s)
=== RUN   TestResourceTransformationWithSplitting
--- PASS: TestResourceTransformationWithSplitting (0.00s)
=== RUN   TestPipelineErrorPropagation
--- PASS: TestPipelineErrorPropagation (0.00s)
=== RUN   TestStandardPipelines
=== RUN   TestStandardPipelines/BuildConfigPipeline_uses_correct_handlers
=== RUN   TestStandardPipelines/BuildStatePipeline_uses_correct_handlers
2025-12-04T18:45:37.555Z [WARN]  No resources found in state file
--- PASS: TestStandardPipelines (0.00s)
    --- PASS: TestStandardPipelines/BuildConfigPipeline_uses_correct_handlers (0.00s)
    --- PASS: TestStandardPipelines/BuildStatePipeline_uses_correct_handlers (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/pipeline	(cached)
?   	github.com/cloudflare/tf-migrate/internal/registry	[no test files]
=== RUN   TestV4ToV5Migration
=== RUN   TestV4ToV5Migration/ConfigTransformation
=== RUN   TestV4ToV5Migration/ConfigTransformation/minimum_config
=== RUN   TestV4ToV5Migration/ConfigTransformation/full_config
=== RUN   TestV4ToV5Migration/StateTransformation
=== RUN   TestV4ToV5Migration/StateTransformation/minimum_state
=== RUN   TestV4ToV5Migration/StateTransformation/full_state
--- PASS: TestV4ToV5Migration (0.01s)
    --- PASS: TestV4ToV5Migration/ConfigTransformation (0.01s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/minimum_config (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/full_config (0.00s)
    --- PASS: TestV4ToV5Migration/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/minimum_state (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/full_state (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/account_member	(cached)
=== RUN   TestV4ToV5Migration
=== RUN   TestV4ToV5Migration/BasicMethods
=== RUN   TestV4ToV5Migration/ConfigTransformation
=== RUN   TestV4ToV5Migration/ConfigTransformation/basic_api_token_with_single_policy
=== RUN   TestV4ToV5Migration/ConfigTransformation/api_token_with_multiple_policies
=== RUN   TestV4ToV5Migration/ConfigTransformation/api_token_with_condition_block
=== RUN   TestV4ToV5Migration/ConfigTransformation/api_token_with_condition_including_not_in
=== RUN   TestV4ToV5Migration/ConfigTransformation/api_token_with_expires_on_and_not_before
=== RUN   TestV4ToV5Migration/ConfigTransformation/api_token_with_status_field
=== RUN   TestV4ToV5Migration/ConfigTransformation/api_token_with_complex_resources_mapping
=== RUN   TestV4ToV5Migration/ConfigTransformation/api_token_with_deny_effect
=== RUN   TestV4ToV5Migration/ConfigTransformation/api_token_with_empty_permission_groups
=== RUN   TestV4ToV5Migration/ConfigTransformation/api_token_with_all_optional_fields
=== RUN   TestV4ToV5Migration/ConfigTransformation/api_token_with_data_reference_and_timestamps
=== RUN   TestV4ToV5Migration/StateTransformation
=== RUN   TestV4ToV5Migration/StateTransformation/basic_api_token_state_transformation
=== RUN   TestV4ToV5Migration/StateTransformation/api_token_with_condition_array_to_object
=== RUN   TestV4ToV5Migration/StateTransformation/api_token_with_multiple_policies
=== RUN   TestV4ToV5Migration/StateTransformation/api_token_with_empty_condition_array
=== RUN   TestV4ToV5Migration/StateTransformation/api_token_with_permission_groups_already_as_objects
--- PASS: TestV4ToV5Migration (0.08s)
    --- PASS: TestV4ToV5Migration/BasicMethods (0.00s)
    --- PASS: TestV4ToV5Migration/ConfigTransformation (0.08s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/basic_api_token_with_single_policy (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/api_token_with_multiple_policies (0.01s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/api_token_with_condition_block (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/api_token_with_condition_including_not_in (0.01s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/api_token_with_expires_on_and_not_before (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/api_token_with_status_field (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/api_token_with_complex_resources_mapping (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/api_token_with_deny_effect (0.01s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/api_token_with_empty_permission_groups (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/api_token_with_all_optional_fields (0.01s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/api_token_with_data_reference_and_timestamps (0.02s)
    --- PASS: TestV4ToV5Migration/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/basic_api_token_state_transformation (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/api_token_with_condition_array_to_object (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/api_token_with_multiple_policies (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/api_token_with_empty_condition_array (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/api_token_with_permission_groups_already_as_objects (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/api_token	(cached)
=== RUN   TestV4ToV5Transformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation/CAA_record_with_numeric_flags_in_data_block_-_content_renamed_to_value
=== RUN   TestV4ToV5Transformation/ConfigTransformation/CAA_record_with_numeric_flags_in_data_attribute_map_-_content_renamed_to_value
=== RUN   TestV4ToV5Transformation/ConfigTransformation/CAA_record_with_flags_numeric_string
=== RUN   TestV4ToV5Transformation/ConfigTransformation/CAA_record_with_content_field_in_middle_of_data_attribute
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Non-CAA_record_should_not_be_modified
=== RUN   TestV4ToV5Transformation/ConfigTransformation/cloudflare_record_(legacy)_with_CAA_type_-_content_renamed_to_value
=== RUN   TestV4ToV5Transformation/ConfigTransformation/DNS_record_without_TTL_-_should_add_TTL_with_default_value
=== RUN   TestV4ToV5Transformation/ConfigTransformation/DNS_record_with_existing_TTL_-_should_keep_existing_value
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Multiple_CAA_records_in_same_file_-_content_renamed_to_value_and_TTL_added
=== RUN   TestV4ToV5Transformation/ConfigTransformation/DNS_record_with_value_field_should_rename_to_content
=== RUN   TestV4ToV5Transformation/ConfigTransformation/MX_record_with_data_block_-_priority_hoisted
=== RUN   TestV4ToV5Transformation/ConfigTransformation/URI_record_with_data_block_-_priority_hoisted
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Record_without_type_attribute
=== RUN   TestV4ToV5Transformation/ConfigTransformation/OPENPGPKEY_record_value_renamed_to_content
=== RUN   TestV4ToV5Transformation/ConfigTransformation/AAAA_record_with_compressed_IPv6
=== RUN   TestV4ToV5Transformation/ConfigTransformation/AAAA_record_with_full_IPv6_address
=== RUN   TestV4ToV5Transformation/ConfigTransformation/AAAA_record_with_existing_content_field
=== RUN   TestV4ToV5Transformation/StateTransformation
=== RUN   TestV4ToV5Transformation/StateTransformation/CAA_record_v4_format_with_array_data_and_numeric_flags
=== RUN   TestV4ToV5Transformation/StateTransformation/Simple_A_record_should_set_data_field_to_null
=== RUN   TestV4ToV5Transformation/StateTransformation/Schema_version_should_be_updated_from_v4_(3)_to_v5_(0)
=== RUN   TestV4ToV5Transformation/StateTransformation/cloudflare_record_(legacy)_renamed_to_cloudflare_dns_record
=== RUN   TestV4ToV5Transformation/StateTransformation/Record_with_value_field_renamed_to_content
=== RUN   TestV4ToV5Transformation/StateTransformation/SRV_record_with_array_data_migration
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_missing_attributes_-_should_skip
=== RUN   TestV4ToV5Transformation/StateTransformation/State_without_instances
=== RUN   TestV4ToV5Transformation/StateTransformation/MX_record_state_with_data_array
=== RUN   TestV4ToV5Transformation/StateTransformation/URI_record_state_with_data_array
=== RUN   TestV4ToV5Transformation/StateTransformation/CAA_record_with_numeric_string_flags_-_should_convert_to_number_type
=== RUN   TestV4ToV5Transformation/StateTransformation/CAA_record_with_null_flags
=== RUN   TestV4ToV5Transformation/StateTransformation/CAA_record_with_non-numeric_string_flags
=== RUN   TestV4ToV5Transformation/StateTransformation/CAA_record_with_empty_string_flags
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_empty_resources
=== RUN   TestV4ToV5Transformation/StateTransformation/Record_with_created_on_but_no_modified_on
=== RUN   TestV4ToV5Transformation/StateTransformation/Record_with_both_value_and_content_fields
=== RUN   TestV4ToV5Transformation/StateTransformation/MX_record_with_integer_priority_-_converts_to_float64
=== RUN   TestV4ToV5Transformation/StateTransformation/SRV_record_with_integer_fields_in_data_-_converts_to_float64
=== RUN   TestV4ToV5Transformation/StateTransformation/TLSA_record_with_integer_fields_in_data_-_converts_to_float64
=== RUN   TestV4ToV5Transformation/StateTransformation/AAAA_record_with_compressed_IPv6_-_preserved_as-is
--- PASS: TestV4ToV5Transformation (0.16s)
    --- PASS: TestV4ToV5Transformation/ConfigTransformation (0.14s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/CAA_record_with_numeric_flags_in_data_block_-_content_renamed_to_value (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/CAA_record_with_numeric_flags_in_data_attribute_map_-_content_renamed_to_value (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/CAA_record_with_flags_numeric_string (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/CAA_record_with_content_field_in_middle_of_data_attribute (0.02s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Non-CAA_record_should_not_be_modified (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/cloudflare_record_(legacy)_with_CAA_type_-_content_renamed_to_value (0.02s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/DNS_record_without_TTL_-_should_add_TTL_with_default_value (0.03s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/DNS_record_with_existing_TTL_-_should_keep_existing_value (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Multiple_CAA_records_in_same_file_-_content_renamed_to_value_and_TTL_added (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/DNS_record_with_value_field_should_rename_to_content (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/MX_record_with_data_block_-_priority_hoisted (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/URI_record_with_data_block_-_priority_hoisted (0.03s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Record_without_type_attribute (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/OPENPGPKEY_record_value_renamed_to_content (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/AAAA_record_with_compressed_IPv6 (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/AAAA_record_with_full_IPv6_address (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/AAAA_record_with_existing_content_field (0.00s)
    --- PASS: TestV4ToV5Transformation/StateTransformation (0.02s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/CAA_record_v4_format_with_array_data_and_numeric_flags (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Simple_A_record_should_set_data_field_to_null (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Schema_version_should_be_updated_from_v4_(3)_to_v5_(0) (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/cloudflare_record_(legacy)_renamed_to_cloudflare_dns_record (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Record_with_value_field_renamed_to_content (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/SRV_record_with_array_data_migration (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_missing_attributes_-_should_skip (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_without_instances (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/MX_record_state_with_data_array (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/URI_record_state_with_data_array (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/CAA_record_with_numeric_string_flags_-_should_convert_to_number_type (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/CAA_record_with_null_flags (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/CAA_record_with_non-numeric_string_flags (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/CAA_record_with_empty_string_flags (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_empty_resources (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Record_with_created_on_but_no_modified_on (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Record_with_both_value_and_content_fields (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/MX_record_with_integer_priority_-_converts_to_float64 (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/SRV_record_with_integer_fields_in_data_-_converts_to_float64 (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/TLSA_record_with_integer_fields_in_data_-_converts_to_float64 (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/AAAA_record_with_compressed_IPv6_-_preserved_as-is (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/dns_record	(cached)
=== RUN   TestV4ToV5Migration
=== RUN   TestV4ToV5Migration/Basic_resource_with_enabled_true
=== RUN   TestV4ToV5Migration/Basic_resource_with_enabled_false
=== RUN   TestV4ToV5Migration/Multiple_resources
--- PASS: TestV4ToV5Migration (0.01s)
    --- PASS: TestV4ToV5Migration/Basic_resource_with_enabled_true (0.00s)
    --- PASS: TestV4ToV5Migration/Basic_resource_with_enabled_false (0.00s)
    --- PASS: TestV4ToV5Migration/Multiple_resources (0.00s)
=== RUN   TestV4ToV5StateTransformation
=== RUN   TestV4ToV5StateTransformation/Basic_state_with_enabled_true
=== RUN   TestV4ToV5StateTransformation/Basic_state_with_enabled_false
=== RUN   TestV4ToV5StateTransformation/State_with_additional_computed_fields
--- PASS: TestV4ToV5StateTransformation (0.00s)
    --- PASS: TestV4ToV5StateTransformation/Basic_state_with_enabled_true (0.00s)
    --- PASS: TestV4ToV5StateTransformation/Basic_state_with_enabled_false (0.00s)
    --- PASS: TestV4ToV5StateTransformation/State_with_additional_computed_fields (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/logpull_retention	(cached)
=== RUN   TestV4ToV5Transformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Minimal_resource
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Resource_with_logpull_options_only_(no_output_options)
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Convert_output_options_block_to_attribute_and_add_v4_defaults
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Rename_cve20214428_to_cve_2021_44228_and_add_v4_defaults
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Add_v4_defaults_when_some_fields_are_user-configured
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Preserve_all_user-configured_values_over_defaults
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Handle_kind_instant-logs_by_removing_attribute
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Preserve_kind_edge_value
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Preserve_kind_empty_string
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Full_transformation_with_all_changes
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Multiple_resources_in_one_file
=== RUN   TestV4ToV5Transformation/ConfigTransformation/With_variable_references
=== RUN   TestV4ToV5Transformation/ConfigTransformation/With_deprecated_frequency_field
=== RUN   TestV4ToV5Transformation/StateTransformation
=== RUN   TestV4ToV5Transformation/StateTransformation/Minimal_state
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_logpull_options_only_(no_output_options)
=== RUN   TestV4ToV5Transformation/StateTransformation/Transform_output_options_array_to_object
=== RUN   TestV4ToV5Transformation/StateTransformation/Rename_cve20214428_in_output_options_array
=== RUN   TestV4ToV5Transformation/StateTransformation/Rename_cve20214428_in_output_options_object
=== RUN   TestV4ToV5Transformation/StateTransformation/Convert_numeric_fields_to_float64
=== RUN   TestV4ToV5Transformation/StateTransformation/Preserve_v4_schema_defaults_in_output_options_state
=== RUN   TestV4ToV5Transformation/StateTransformation/Preserve_user-configured_values_over_v4_defaults_in_state
=== RUN   TestV4ToV5Transformation/StateTransformation/Handle_kind_instant-logs_by_removing_attribute
=== RUN   TestV4ToV5Transformation/StateTransformation/Preserve_kind_edge_value
=== RUN   TestV4ToV5Transformation/StateTransformation/Remove_computed-only_fields
=== RUN   TestV4ToV5Transformation/StateTransformation/Empty_output_options_array_removed
=== RUN   TestV4ToV5Transformation/StateTransformation/Full_state_transformation
--- PASS: TestV4ToV5Transformation (0.14s)
    --- PASS: TestV4ToV5Transformation/ConfigTransformation (0.14s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Minimal_resource (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Resource_with_logpull_options_only_(no_output_options) (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Convert_output_options_block_to_attribute_and_add_v4_defaults (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Rename_cve20214428_to_cve_2021_44228_and_add_v4_defaults (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Add_v4_defaults_when_some_fields_are_user-configured (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Preserve_all_user-configured_values_over_defaults (0.04s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Handle_kind_instant-logs_by_removing_attribute (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Preserve_kind_edge_value (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Preserve_kind_empty_string (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Full_transformation_with_all_changes (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Multiple_resources_in_one_file (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/With_variable_references (0.06s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/With_deprecated_frequency_field (0.00s)
    --- PASS: TestV4ToV5Transformation/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Minimal_state (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_logpull_options_only_(no_output_options) (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Transform_output_options_array_to_object (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Rename_cve20214428_in_output_options_array (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Rename_cve20214428_in_output_options_object (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Convert_numeric_fields_to_float64 (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Preserve_v4_schema_defaults_in_output_options_state (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Preserve_user-configured_values_over_v4_defaults_in_state (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Handle_kind_instant-logs_by_removing_attribute (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Preserve_kind_edge_value (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Remove_computed-only_fields (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Empty_output_options_array_removed (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Full_state_transformation (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/logpush_job	(cached)
=== RUN   TestV4ToV5Migration
=== RUN   TestV4ToV5Migration/ConfigTransformation
=== RUN   TestV4ToV5Migration/ConfigTransformation/minimal_config_with_url
=== RUN   TestV4ToV5Migration/ConfigTransformation/full_config_with_all_fields
=== RUN   TestV4ToV5Migration/ConfigTransformation/multiple_resources
=== RUN   TestV4ToV5Migration/StateTransformation
=== RUN   TestV4ToV5Migration/StateTransformation/minimal_state_with_url
=== RUN   TestV4ToV5Migration/StateTransformation/full_state_with_all_fields
--- PASS: TestV4ToV5Migration (0.02s)
    --- PASS: TestV4ToV5Migration/ConfigTransformation (0.02s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/minimal_config_with_url (0.01s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/full_config_with_all_fields (0.01s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/multiple_resources (0.00s)
    --- PASS: TestV4ToV5Migration/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/minimal_state_with_url (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/full_state_with_all_fields (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/notification_policy_webhooks	(cached)
=== RUN   TestV4ToV5Transformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Minimal_resource
=== RUN   TestV4ToV5Transformation/ConfigTransformation/FailOpen_true_resource
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Resource_with_build_config_block
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Resource_with_source_and_config_blocks
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Resource_with_deployment_configs_and_nested_blocks
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Full_resource_with_all_nested_blocks
=== RUN   TestV4ToV5Transformation/StateTransformation
=== RUN   TestV4ToV5Transformation/StateTransformation/Minimal_state
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_build_config_array_to_object
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_source_config_and_field_rename
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_environment_variables_and_secrets_merge
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_TypeMap_wrapping_(kv_namespaces,_d1_databases)
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_service_binding_to_services_conversion
=== RUN   TestV4ToV5Transformation/StateTransformation/Full_state_with_all_transformations
=== RUN   TestV4ToV5Transformation/DefaultValueHandling
=== RUN   TestV4ToV5Transformation/DefaultValueHandling/Missing_usage_model_gets_default_(bundled)
=== RUN   TestV4ToV5Transformation/DefaultValueHandling/Missing_fail_open_gets_v4_default_(false)
=== RUN   TestV4ToV5Transformation/DefaultValueHandling/Existing_usage_model_is_preserved_(not_overridden)
=== RUN   TestV4ToV5Transformation/DefaultValueHandling/Existing_fail_open_is_preserved
=== RUN   TestV4ToV5Transformation/DefaultValueHandling/Both_preview_and_production_missing_defaults
=== RUN   TestV4ToV5Transformation/DefaultValueHandling/State_with_empty_compatibility_flags_arrays
--- PASS: TestV4ToV5Transformation (0.12s)
    --- PASS: TestV4ToV5Transformation/ConfigTransformation (0.10s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Minimal_resource (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/FailOpen_true_resource (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Resource_with_build_config_block (0.04s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Resource_with_source_and_config_blocks (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Resource_with_deployment_configs_and_nested_blocks (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Full_resource_with_all_nested_blocks (0.03s)
    --- PASS: TestV4ToV5Transformation/StateTransformation (0.02s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Minimal_state (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_build_config_array_to_object (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_source_config_and_field_rename (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_environment_variables_and_secrets_merge (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_TypeMap_wrapping_(kv_namespaces,_d1_databases) (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_service_binding_to_services_conversion (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Full_state_with_all_transformations (0.00s)
    --- PASS: TestV4ToV5Transformation/DefaultValueHandling (0.01s)
        --- PASS: TestV4ToV5Transformation/DefaultValueHandling/Missing_usage_model_gets_default_(bundled) (0.00s)
        --- PASS: TestV4ToV5Transformation/DefaultValueHandling/Missing_fail_open_gets_v4_default_(false) (0.00s)
        --- PASS: TestV4ToV5Transformation/DefaultValueHandling/Existing_usage_model_is_preserved_(not_overridden) (0.00s)
        --- PASS: TestV4ToV5Transformation/DefaultValueHandling/Existing_fail_open_is_preserved (0.00s)
        --- PASS: TestV4ToV5Transformation/DefaultValueHandling/Both_preview_and_production_missing_defaults (0.00s)
        --- PASS: TestV4ToV5Transformation/DefaultValueHandling/State_with_empty_compatibility_flags_arrays (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/pages_project	(cached)
=== RUN   TestV4ToV5Migration
=== RUN   TestV4ToV5Migration/ConfigTransformation
=== RUN   TestV4ToV5Migration/ConfigTransformation/basic_r2_bucket_with_required_fields
=== RUN   TestV4ToV5Migration/ConfigTransformation/r2_bucket_with_location
=== RUN   TestV4ToV5Migration/ConfigTransformation/r2_bucket_with_lowercase_location
=== RUN   TestV4ToV5Migration/ConfigTransformation/multiple_r2_buckets
=== RUN   TestV4ToV5Migration/ConfigTransformation/r2_bucket_with_variable_reference
=== RUN   TestV4ToV5Migration/StateTransformation
=== RUN   TestV4ToV5Migration/StateTransformation/basic_state_with_required_fields
=== RUN   TestV4ToV5Migration/StateTransformation/state_with_id_already_present
=== RUN   TestV4ToV5Migration/StateTransformation/state_with_location_(uppercase)
=== RUN   TestV4ToV5Migration/StateTransformation/state_with_location_(lowercase)
=== RUN   TestV4ToV5Migration/StateTransformation/state_with_all_v4_fields
--- PASS: TestV4ToV5Migration (0.03s)
    --- PASS: TestV4ToV5Migration/ConfigTransformation (0.03s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/basic_r2_bucket_with_required_fields (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/r2_bucket_with_location (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/r2_bucket_with_lowercase_location (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/multiple_r2_buckets (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/r2_bucket_with_variable_reference (0.02s)
    --- PASS: TestV4ToV5Migration/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/basic_state_with_required_fields (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/state_with_id_already_present (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/state_with_location_(uppercase) (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/state_with_location_(lowercase) (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/state_with_all_v4_fields (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/r2_bucket	(cached)
=== RUN   TestV4ToV5Migration
=== RUN   TestV4ToV5Migration/ConfigTransformation
=== RUN   TestV4ToV5Migration/ConfigTransformation/basic_resource
=== RUN   TestV4ToV5Migration/ConfigTransformation/multiple_resources
=== RUN   TestV4ToV5Migration/ConfigTransformation/with_special_characters_in_key
=== RUN   TestV4ToV5Migration/StateTransformation
=== RUN   TestV4ToV5Migration/StateTransformation/basic_state
=== RUN   TestV4ToV5Migration/StateTransformation/with_special_characters
=== RUN   TestV4ToV5Migration/StateTransformation/empty_value
--- PASS: TestV4ToV5Migration (0.01s)
    --- PASS: TestV4ToV5Migration/ConfigTransformation (0.01s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/basic_resource (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/multiple_resources (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/with_special_characters_in_key (0.00s)
    --- PASS: TestV4ToV5Migration/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/basic_state (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/with_special_characters (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/empty_value (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/workers_kv	(cached)
=== RUN   TestV4ToV5Migration
=== RUN   TestV4ToV5Migration/ConfigTransformation
=== RUN   TestV4ToV5Migration/ConfigTransformation/basic_workers_KV_namespace
=== RUN   TestV4ToV5Migration/ConfigTransformation/namespace_with_special_characters_in_title
=== RUN   TestV4ToV5Migration/ConfigTransformation/multiple_namespaces
=== RUN   TestV4ToV5Migration/ConfigTransformation/namespace_with_variable_reference
=== RUN   TestV4ToV5Migration/StateTransformation
=== RUN   TestV4ToV5Migration/StateTransformation/basic_state
=== RUN   TestV4ToV5Migration/StateTransformation/state_with_id_(already_present)
=== RUN   TestV4ToV5Migration/StateTransformation/state_with_special_characters
--- PASS: TestV4ToV5Migration (0.05s)
    --- PASS: TestV4ToV5Migration/ConfigTransformation (0.05s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/basic_workers_KV_namespace (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/namespace_with_special_characters_in_title (0.00s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/multiple_namespaces (0.03s)
        --- PASS: TestV4ToV5Migration/ConfigTransformation/namespace_with_variable_reference (0.02s)
    --- PASS: TestV4ToV5Migration/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/basic_state (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/state_with_id_(already_present) (0.00s)
        --- PASS: TestV4ToV5Migration/StateTransformation/state_with_special_characters (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/workers_kv_namespace	(cached)
=== RUN   TestV4ToV5Transformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Basic_resource_with_all_fields_-_min_days_for_renewal_removed
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Minimal_resource_with_only_required_fields
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Legacy_resource_name_-_cloudflare_access_service_token
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Resource_with_min_days_for_renewal_=_0_(should_still_be_removed)
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Multiple_resources_in_one_file
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Resource_without_min_days_for_renewal_(should_be_unchanged)
=== RUN   TestV4ToV5Transformation/StateTransformation
=== RUN   TestV4ToV5Transformation/StateTransformation/Type_conversion_-_client_secret_version_from_int_to_float64
=== RUN   TestV4ToV5Transformation/StateTransformation/Type_conversion_-_larger_client_secret_version_values
=== RUN   TestV4ToV5Transformation/StateTransformation/Missing_client_secret_version_-_should_add_default
=== RUN   TestV4ToV5Transformation/StateTransformation/Field_removal_-_min_days_for_renewal_removed_from_state
=== RUN   TestV4ToV5Transformation/StateTransformation/Complete_state_with_all_fields
=== RUN   TestV4ToV5Transformation/StateTransformation/Zone-scoped_resource_(zone_id_instead_of_account_id)
=== RUN   TestV4ToV5Transformation/StateTransformation/Legacy_resource_name_-_cloudflare_access_service_token_in_state
=== RUN   TestV4ToV5Transformation/StateTransformation/Multiple_instances_of_the_same_resource
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_empty_resources
=== RUN   TestV4ToV5Transformation/StateTransformation/State_without_instances
=== RUN   TestV4ToV5Transformation/StateTransformation/Type_conversion_-_single_instance
--- PASS: TestV4ToV5Transformation (0.03s)
    --- PASS: TestV4ToV5Transformation/ConfigTransformation (0.02s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Basic_resource_with_all_fields_-_min_days_for_renewal_removed (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Minimal_resource_with_only_required_fields (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Legacy_resource_name_-_cloudflare_access_service_token (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Resource_with_min_days_for_renewal_=_0_(should_still_be_removed) (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Multiple_resources_in_one_file (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Resource_without_min_days_for_renewal_(should_be_unchanged) (0.00s)
    --- PASS: TestV4ToV5Transformation/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Type_conversion_-_client_secret_version_from_int_to_float64 (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Type_conversion_-_larger_client_secret_version_values (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Missing_client_secret_version_-_should_add_default (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Field_removal_-_min_days_for_renewal_removed_from_state (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Complete_state_with_all_fields (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Zone-scoped_resource_(zone_id_instead_of_account_id) (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Legacy_resource_name_-_cloudflare_access_service_token_in_state (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Multiple_instances_of_the_same_resource (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_empty_resources (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_without_instances (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Type_conversion_-_single_instance (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/zero_trust_access_service_token	(cached)
=== RUN   TestConfigTransformation
=== RUN   TestConfigTransformation/minimal_resource_-_rename
=== RUN   TestConfigTransformation/minimal_resource_-_no_rename
=== RUN   TestConfigTransformation/minimal_resource_-_no_name
=== RUN   TestConfigTransformation/resource_with_input_block
=== RUN   TestConfigTransformation/resource_with_input_block_and_nested_locations_block
=== RUN   TestConfigTransformation/resource_with_match_blocks
=== RUN   TestConfigTransformation/resource_with_removed_running_attribute
=== RUN   TestConfigTransformation/comprehensive_resource_with_all_field_types
=== RUN   TestConfigTransformation/match_block_with_dynamic_reference
=== RUN   TestConfigTransformation/multiple_match_blocks_with_dynamic_references
=== RUN   TestConfigTransformation/match_blocks_with_mixed_static_and_dynamic_values
--- PASS: TestConfigTransformation (0.07s)
    --- PASS: TestConfigTransformation/minimal_resource_-_rename (0.00s)
    --- PASS: TestConfigTransformation/minimal_resource_-_no_rename (0.00s)
    --- PASS: TestConfigTransformation/minimal_resource_-_no_name (0.00s)
    --- PASS: TestConfigTransformation/resource_with_input_block (0.00s)
    --- PASS: TestConfigTransformation/resource_with_input_block_and_nested_locations_block (0.00s)
    --- PASS: TestConfigTransformation/resource_with_match_blocks (0.01s)
    --- PASS: TestConfigTransformation/resource_with_removed_running_attribute (0.00s)
    --- PASS: TestConfigTransformation/comprehensive_resource_with_all_field_types (0.02s)
    --- PASS: TestConfigTransformation/match_block_with_dynamic_reference (0.00s)
    --- PASS: TestConfigTransformation/multiple_match_blocks_with_dynamic_references (0.00s)
    --- PASS: TestConfigTransformation/match_blocks_with_mixed_static_and_dynamic_values (0.01s)
=== RUN   TestStateTransformation
=== RUN   TestStateTransformation/empty_input_block
=== RUN   TestStateTransformation/non_empty_input_block
=== RUN   TestStateTransformation/minimal_resource_-_rename
=== RUN   TestStateTransformation/minimal_resource_-_no_rename
=== RUN   TestStateTransformation/resource_with_input_block
=== RUN   TestStateTransformation/resource_with_input_block_and_nested_locations_block
=== RUN   TestStateTransformation/removed_running_attribute
=== RUN   TestStateTransformation/resource_with_int_to_float_attributes
=== RUN   TestStateTransformation/comprehensive_resource_with_all_field_types
=== RUN   TestStateTransformation/resource_with_missing_attributes
=== RUN   TestStateTransformation/resource_with_empty_array_input
=== RUN   TestStateTransformation/resource_with_empty_locations_array
--- PASS: TestStateTransformation (0.04s)
    --- PASS: TestStateTransformation/empty_input_block (0.00s)
    --- PASS: TestStateTransformation/non_empty_input_block (0.01s)
    --- PASS: TestStateTransformation/minimal_resource_-_rename (0.00s)
    --- PASS: TestStateTransformation/minimal_resource_-_no_rename (0.00s)
    --- PASS: TestStateTransformation/resource_with_input_block (0.00s)
    --- PASS: TestStateTransformation/resource_with_input_block_and_nested_locations_block (0.01s)
    --- PASS: TestStateTransformation/removed_running_attribute (0.00s)
    --- PASS: TestStateTransformation/resource_with_int_to_float_attributes (0.00s)
    --- PASS: TestStateTransformation/comprehensive_resource_with_all_field_types (0.00s)
    --- PASS: TestStateTransformation/resource_with_missing_attributes (0.00s)
    --- PASS: TestStateTransformation/resource_with_empty_array_input (0.00s)
    --- PASS: TestStateTransformation/resource_with_empty_locations_array (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/zero_trust_device_posture_rule	(cached)
=== RUN   TestV4ToV5Transformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Basic_custom_profile_with_single_entry
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Multiple_entries
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Minimal_profile
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Profile_without_description
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Zero_Trust_DLP_profile_v4_name
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Predefined_profile_migration
=== RUN   TestV4ToV5Transformation/StateTransformation
=== RUN   TestV4ToV5Transformation/StateTransformation/Basic_state_with_single_entry
=== RUN   TestV4ToV5Transformation/StateTransformation/Multiple_entries_state
=== RUN   TestV4ToV5Transformation/StateTransformation/Minimal_state
=== RUN   TestV4ToV5Transformation/StateTransformation/Predefined_profile_state_transformation
=== RUN   TestV4ToV5Transformation/StateTransformation/Zero_Trust_DLP_profile_v4_name_state
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_context_awareness.skip_empty_array
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_context_awareness_empty_array
--- PASS: TestV4ToV5Transformation (0.03s)
    --- PASS: TestV4ToV5Transformation/ConfigTransformation (0.02s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Basic_custom_profile_with_single_entry (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Multiple_entries (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Minimal_profile (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Profile_without_description (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Zero_Trust_DLP_profile_v4_name (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Predefined_profile_migration (0.00s)
    --- PASS: TestV4ToV5Transformation/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Basic_state_with_single_entry (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Multiple_entries_state (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Minimal_state (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Predefined_profile_state_transformation (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Zero_Trust_DLP_profile_v4_name_state (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_context_awareness.skip_empty_array (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_context_awareness_empty_array (0.00s)
=== RUN   TestPreprocessing
=== RUN   TestPreprocessing/Preprocessing_returns_input_unchanged
--- PASS: TestPreprocessing (0.00s)
    --- PASS: TestPreprocessing/Preprocessing_returns_input_unchanged (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/zero_trust_dlp_custom_profile	(cached)
=== RUN   TestV4ToV5Transformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Minimal_gateway_policy
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Gateway_policy_with_rule_settings
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Gateway_policy_with_nested_blocks
=== RUN   TestV4ToV5Transformation/StateTransformation
=== RUN   TestV4ToV5Transformation/StateTransformation/Minimal_state_with_numeric_conversions
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_rule_settings_array_to_object
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_nested_blocks_and_type_conversions
--- PASS: TestV4ToV5Transformation (0.02s)
    --- PASS: TestV4ToV5Transformation/ConfigTransformation (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Minimal_gateway_policy (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Gateway_policy_with_rule_settings (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Gateway_policy_with_nested_blocks (0.00s)
    --- PASS: TestV4ToV5Transformation/StateTransformation (0.01s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Minimal_state_with_numeric_conversions (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_rule_settings_array_to_object (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_nested_blocks_and_type_conversions (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/zero_trust_gateway_policy	(cached)
=== RUN   TestV4ToV5Transformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Simple_IP_list_with_string_array_items
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Items_with_description_blocks
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Mixed_items_and_items_with_description
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Domain_list
=== RUN   TestV4ToV5Transformation/ConfigTransformation/URL_list_with_items_with_description
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Email_list
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Serial_number_list
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Empty_items_list
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Multiple_resources_in_single_file
=== RUN   TestV4ToV5Transformation/StateTransformation
=== RUN   TestV4ToV5Transformation/StateTransformation/Simple_IP_list_state_transformation
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_items_with_description
=== RUN   TestV4ToV5Transformation/StateTransformation/Empty_items_list_in_state
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_existing_ID_field
=== RUN   TestV4ToV5Transformation/StateTransformation/Multiple_resources_in_state
--- PASS: TestV4ToV5Transformation (0.08s)
    --- PASS: TestV4ToV5Transformation/ConfigTransformation (0.07s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Simple_IP_list_with_string_array_items (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Items_with_description_blocks (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Mixed_items_and_items_with_description (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Domain_list (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/URL_list_with_items_with_description (0.03s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Email_list (0.02s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Serial_number_list (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Empty_items_list (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Multiple_resources_in_single_file (0.00s)
    --- PASS: TestV4ToV5Transformation/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Simple_IP_list_state_transformation (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_items_with_description (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Empty_items_list_in_state (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_existing_ID_field (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Multiple_resources_in_state (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/zero_trust_list	(cached)
=== RUN   TestV4ToV5Transformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation/minimal_tunnel
=== RUN   TestV4ToV5Transformation/ConfigTransformation/tunnel_with_config_src
=== RUN   TestV4ToV5Transformation/ConfigTransformation/tunnel_with_cloudflare_config
=== RUN   TestV4ToV5Transformation/ConfigTransformation/multiple_tunnels
=== RUN   TestV4ToV5Transformation/StateTransformation
=== RUN   TestV4ToV5Transformation/StateTransformation/minimal_state
=== RUN   TestV4ToV5Transformation/StateTransformation/with_config_src
=== RUN   TestV4ToV5Transformation/StateTransformation/without_computed_fields
--- PASS: TestV4ToV5Transformation (0.07s)
    --- PASS: TestV4ToV5Transformation/ConfigTransformation (0.07s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/minimal_tunnel (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/tunnel_with_config_src (0.03s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/tunnel_with_cloudflare_config (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/multiple_tunnels (0.02s)
    --- PASS: TestV4ToV5Transformation/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/minimal_state (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/with_config_src (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/without_computed_fields (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/zero_trust_tunnel_cloudflared	(cached)
=== RUN   TestV4ToV5Transformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Basic_tunnel_route_with_all_fields
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Minimal_tunnel_route_-_required_fields_only
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Tunnel_route_with_IPv6_network
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Tunnel_route_with_empty_comment
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Multiple_tunnel_routes_in_one_file
=== RUN   TestV4ToV5Transformation/StateTransformation
=== RUN   TestV4ToV5Transformation/StateTransformation/Complete_state_with_all_fields
=== RUN   TestV4ToV5Transformation/StateTransformation/Minimal_state_-_required_fields_only
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_empty_comment
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_missing_optional_fields_(null_values)
=== RUN   TestV4ToV5Transformation/StateTransformation/IPv6_network_state
=== RUN   TestV4ToV5Transformation/StateTransformationWithMockAPI
=== RUN   TestV4ToV5Transformation/StateTransformationWithMockAPI/State_transformation_with_API_lookup_for_UUID
--- PASS: TestV4ToV5Transformation (0.02s)
    --- PASS: TestV4ToV5Transformation/ConfigTransformation (0.02s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Basic_tunnel_route_with_all_fields (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Minimal_tunnel_route_-_required_fields_only (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Tunnel_route_with_IPv6_network (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Tunnel_route_with_empty_comment (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Multiple_tunnel_routes_in_one_file (0.01s)
    --- PASS: TestV4ToV5Transformation/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Complete_state_with_all_fields (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/Minimal_state_-_required_fields_only (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_empty_comment (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_missing_optional_fields_(null_values) (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/IPv6_network_state (0.00s)
    --- PASS: TestV4ToV5Transformation/StateTransformationWithMockAPI (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformationWithMockAPI/State_transformation_with_API_lookup_for_UUID (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/zero_trust_tunnel_cloudflared_route	(cached)
=== RUN   TestConfigTransformation
=== RUN   TestConfigTransformation/basic_zone_transformation
=== RUN   TestConfigTransformation/zone_with_all_v4_attributes
=== RUN   TestConfigTransformation/zone_with_only_removed_attributes
=== RUN   TestConfigTransformation/zone_with_unicode_domain
=== RUN   TestConfigTransformation/zone_with_variable_reference_for_account_id
=== RUN   TestConfigTransformation/zone_with_expression_for_account_id
=== RUN   TestConfigTransformation/multiple_zones_in_same_config
=== RUN   TestConfigTransformation/zone_with_paused_=_false_(default_value)
=== RUN   TestConfigTransformation/zone_with_type_=_full_(default_value)
--- PASS: TestConfigTransformation (0.02s)
    --- PASS: TestConfigTransformation/basic_zone_transformation (0.00s)
    --- PASS: TestConfigTransformation/zone_with_all_v4_attributes (0.00s)
    --- PASS: TestConfigTransformation/zone_with_only_removed_attributes (0.00s)
    --- PASS: TestConfigTransformation/zone_with_unicode_domain (0.00s)
    --- PASS: TestConfigTransformation/zone_with_variable_reference_for_account_id (0.00s)
    --- PASS: TestConfigTransformation/zone_with_expression_for_account_id (0.00s)
    --- PASS: TestConfigTransformation/multiple_zones_in_same_config (0.00s)
    --- PASS: TestConfigTransformation/zone_with_paused_=_false_(default_value) (0.00s)
    --- PASS: TestConfigTransformation/zone_with_type_=_full_(default_value) (0.00s)
=== RUN   TestStateTransformation
=== RUN   TestStateTransformation/basic_zone_state_transformation
=== RUN   TestStateTransformation/zone_state_with_removed_attributes
=== RUN   TestStateTransformation/zone_state_with_vanity_name_servers
=== RUN   TestStateTransformation/zone_state_with_meta_object
=== RUN   TestStateTransformation/minimal_zone_state_(only_required_fields)
=== RUN   TestStateTransformation/invalid_zone_state_(missing_attributes)
--- PASS: TestStateTransformation (0.00s)
    --- PASS: TestStateTransformation/basic_zone_state_transformation (0.00s)
    --- PASS: TestStateTransformation/zone_state_with_removed_attributes (0.00s)
    --- PASS: TestStateTransformation/zone_state_with_vanity_name_servers (0.00s)
    --- PASS: TestStateTransformation/zone_state_with_meta_object (0.00s)
    --- PASS: TestStateTransformation/minimal_zone_state_(only_required_fields) (0.00s)
    --- PASS: TestStateTransformation/invalid_zone_state_(missing_attributes) (0.00s)
=== RUN   TestCanHandle
=== RUN   TestCanHandle/cloudflare_zone_resource
=== RUN   TestCanHandle/different_resource
=== RUN   TestCanHandle/empty_resource
--- PASS: TestCanHandle (0.00s)
    --- PASS: TestCanHandle/cloudflare_zone_resource (0.00s)
    --- PASS: TestCanHandle/different_resource (0.00s)
    --- PASS: TestCanHandle/empty_resource (0.00s)
=== RUN   TestGetResourceType
--- PASS: TestGetResourceType (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/zone	(cached)
=== RUN   TestV4ToV5Transformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Basic_zone_dnssec_with_minimal_fields
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Multiple_zone_dnssec_resources_in_one_file
=== RUN   TestV4ToV5Transformation/ConfigTransformation/Zone_DNSSEC_with_modified_on_field_(should_be_removed)
=== RUN   TestV4ToV5Transformation/StateTransformation
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_minimal_fields
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_all_fields_populated
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_float64_fields
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_integer_fields_(v4_format)_converted_to_float64
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_pending_status_(should_be_converted_to_active)
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_pending-disabled_status_(should_be_converted_to_disabled)
=== RUN   TestV4ToV5Transformation/StateTransformation/State_with_modified_on_in_v4_format_(should_be_converted_to_RFC3339)
--- PASS: TestV4ToV5Transformation (0.01s)
    --- PASS: TestV4ToV5Transformation/ConfigTransformation (0.01s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Basic_zone_dnssec_with_minimal_fields (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Multiple_zone_dnssec_resources_in_one_file (0.00s)
        --- PASS: TestV4ToV5Transformation/ConfigTransformation/Zone_DNSSEC_with_modified_on_field_(should_be_removed) (0.00s)
    --- PASS: TestV4ToV5Transformation/StateTransformation (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_minimal_fields (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_all_fields_populated (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_float64_fields (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_integer_fields_(v4_format)_converted_to_float64 (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_pending_status_(should_be_converted_to_active) (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_pending-disabled_status_(should_be_converted_to_disabled) (0.00s)
        --- PASS: TestV4ToV5Transformation/StateTransformation/State_with_modified_on_in_v4_format_(should_be_converted_to_RFC3339) (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/resources/zone_dnssec	(cached)
?   	github.com/cloudflare/tf-migrate/internal/testhelpers	[no test files]
?   	github.com/cloudflare/tf-migrate/internal/transform	[no test files]
=== RUN   TestParseArrayAttribute
=== RUN   TestParseArrayAttribute/Simple_string_array
=== RUN   TestParseArrayAttribute/Empty_array
=== RUN   TestParseArrayAttribute/Number_array
=== RUN   TestParseArrayAttribute/Boolean_array
=== RUN   TestParseArrayAttribute/Object_array
=== RUN   TestParseArrayAttribute/Mixed_content_object_array
=== RUN   TestParseArrayAttribute/Single_element_array
=== RUN   TestParseArrayAttribute/Nil_attribute
--- PASS: TestParseArrayAttribute (0.00s)
    --- PASS: TestParseArrayAttribute/Simple_string_array (0.00s)
    --- PASS: TestParseArrayAttribute/Empty_array (0.00s)
    --- PASS: TestParseArrayAttribute/Number_array (0.00s)
    --- PASS: TestParseArrayAttribute/Boolean_array (0.00s)
    --- PASS: TestParseArrayAttribute/Object_array (0.00s)
    --- PASS: TestParseArrayAttribute/Mixed_content_object_array (0.00s)
    --- PASS: TestParseArrayAttribute/Single_element_array (0.00s)
    --- PASS: TestParseArrayAttribute/Nil_attribute (0.00s)
=== RUN   TestDetermineElementType
=== RUN   TestDetermineElementType/String_literal
=== RUN   TestDetermineElementType/Number_literal
=== RUN   TestDetermineElementType/Boolean_true
=== RUN   TestDetermineElementType/Boolean_false
=== RUN   TestDetermineElementType/Object
=== RUN   TestDetermineElementType/Reference
--- PASS: TestDetermineElementType (0.00s)
    --- PASS: TestDetermineElementType/String_literal (0.00s)
    --- PASS: TestDetermineElementType/Number_literal (0.00s)
    --- PASS: TestDetermineElementType/Boolean_true (0.00s)
    --- PASS: TestDetermineElementType/Boolean_false (0.00s)
    --- PASS: TestDetermineElementType/Object (0.00s)
    --- PASS: TestDetermineElementType/Reference (0.00s)
=== RUN   TestMergeAttributeAndBlocksToObjectArray
=== RUN   TestMergeAttributeAndBlocksToObjectArray/Merge_items_array_and_items_with_description_blocks_(blocks_first)
=== RUN   TestMergeAttributeAndBlocksToObjectArray/Merge_with_array_first
=== RUN   TestMergeAttributeAndBlocksToObjectArray/Only_array_attribute
=== RUN   TestMergeAttributeAndBlocksToObjectArray/Only_blocks
=== RUN   TestMergeAttributeAndBlocksToObjectArray/Multiple_optional_fields
=== RUN   TestMergeAttributeAndBlocksToObjectArray/Empty_-_no_array_or_blocks
=== RUN   TestMergeAttributeAndBlocksToObjectArray/Blocks_with_missing_optional_fields
--- PASS: TestMergeAttributeAndBlocksToObjectArray (0.01s)
    --- PASS: TestMergeAttributeAndBlocksToObjectArray/Merge_items_array_and_items_with_description_blocks_(blocks_first) (0.00s)
    --- PASS: TestMergeAttributeAndBlocksToObjectArray/Merge_with_array_first (0.00s)
    --- PASS: TestMergeAttributeAndBlocksToObjectArray/Only_array_attribute (0.00s)
    --- PASS: TestMergeAttributeAndBlocksToObjectArray/Only_blocks (0.00s)
    --- PASS: TestMergeAttributeAndBlocksToObjectArray/Multiple_optional_fields (0.00s)
    --- PASS: TestMergeAttributeAndBlocksToObjectArray/Empty_-_no_array_or_blocks (0.00s)
    --- PASS: TestMergeAttributeAndBlocksToObjectArray/Blocks_with_missing_optional_fields (0.00s)
=== RUN   TestExtractStringFieldFromBlock
=== RUN   TestExtractStringFieldFromBlock/Extract_existing_field
=== RUN   TestExtractStringFieldFromBlock/Extract_non-existent_field
=== RUN   TestExtractStringFieldFromBlock/Extract_from_block_with_multiple_fields
--- PASS: TestExtractStringFieldFromBlock (0.00s)
    --- PASS: TestExtractStringFieldFromBlock/Extract_existing_field (0.00s)
    --- PASS: TestExtractStringFieldFromBlock/Extract_non-existent_field (0.00s)
    --- PASS: TestExtractStringFieldFromBlock/Extract_from_block_with_multiple_fields (0.00s)
=== RUN   TestExtractStringFieldFromArrayElement
=== RUN   TestExtractStringFieldFromArrayElement/Extract_from_string_element
=== RUN   TestExtractStringFieldFromArrayElement/Extract_from_multiple_elements
=== RUN   TestExtractStringFieldFromArrayElement/Non-string_element
--- PASS: TestExtractStringFieldFromArrayElement (0.00s)
    --- PASS: TestExtractStringFieldFromArrayElement/Extract_from_string_element (0.00s)
    --- PASS: TestExtractStringFieldFromArrayElement/Extract_from_multiple_elements (0.00s)
    --- PASS: TestExtractStringFieldFromArrayElement/Non-string_element (0.00s)
=== RUN   TestEdgeCases
=== RUN   TestEdgeCases/ParseArrayAttribute_with_nil
=== RUN   TestEdgeCases/MergeAttributeAndBlocksToObjectArray_with_empty_body
=== RUN   TestEdgeCases/Special_characters_in_values
=== RUN   TestEdgeCases/Empty_string_values
--- PASS: TestEdgeCases (0.00s)
    --- PASS: TestEdgeCases/ParseArrayAttribute_with_nil (0.00s)
    --- PASS: TestEdgeCases/MergeAttributeAndBlocksToObjectArray_with_empty_body (0.00s)
    --- PASS: TestEdgeCases/Special_characters_in_values (0.00s)
    --- PASS: TestEdgeCases/Empty_string_values (0.00s)
=== RUN   TestOrderPreservation
=== RUN   TestOrderPreservation/Blocks_first_ordering
=== RUN   TestOrderPreservation/Array_first_ordering
--- PASS: TestOrderPreservation (0.00s)
    --- PASS: TestOrderPreservation/Blocks_first_ordering (0.00s)
    --- PASS: TestOrderPreservation/Array_first_ordering (0.00s)
=== RUN   TestMergeWithNoOptionalFields
--- PASS: TestMergeWithNoOptionalFields (0.00s)
=== RUN   TestEnsureAttribute
=== RUN   TestEnsureAttribute/Add_missing_attribute_with_string_value
=== RUN   TestEnsureAttribute/Do_not_overwrite_existing_attribute
=== RUN   TestEnsureAttribute/Add_attribute_with_boolean_value
--- PASS: TestEnsureAttribute (0.00s)
    --- PASS: TestEnsureAttribute/Add_missing_attribute_with_string_value (0.00s)
    --- PASS: TestEnsureAttribute/Do_not_overwrite_existing_attribute (0.00s)
    --- PASS: TestEnsureAttribute/Add_attribute_with_boolean_value (0.00s)
=== RUN   TestRenameAttribute
=== RUN   TestRenameAttribute/Rename_existing_attribute
=== RUN   TestRenameAttribute/Return_false_for_non-existent_attribute
--- PASS: TestRenameAttribute (0.00s)
    --- PASS: TestRenameAttribute/Rename_existing_attribute (0.00s)
    --- PASS: TestRenameAttribute/Return_false_for_non-existent_attribute (0.00s)
=== RUN   TestRemoveAttributes
=== RUN   TestRemoveAttributes/Remove_multiple_attributes
=== RUN   TestRemoveAttributes/Remove_non-existent_attributes
=== RUN   TestRemoveAttributes/Mixed_existing_and_non-existent
--- PASS: TestRemoveAttributes (0.00s)
    --- PASS: TestRemoveAttributes/Remove_multiple_attributes (0.00s)
    --- PASS: TestRemoveAttributes/Remove_non-existent_attributes (0.00s)
    --- PASS: TestRemoveAttributes/Mixed_existing_and_non-existent (0.00s)
=== RUN   TestExtractStringFromAttribute
=== RUN   TestExtractStringFromAttribute/Extract_quoted_string
=== RUN   TestExtractStringFromAttribute/Extract_simple_identifier
=== RUN   TestExtractStringFromAttribute/Return_empty_for_non-existent_attribute
--- PASS: TestExtractStringFromAttribute (0.00s)
    --- PASS: TestExtractStringFromAttribute/Extract_quoted_string (0.00s)
    --- PASS: TestExtractStringFromAttribute/Extract_simple_identifier (0.00s)
    --- PASS: TestExtractStringFromAttribute/Return_empty_for_non-existent_attribute (0.00s)
=== RUN   TestExtractStringFromAttribute_Nil
--- PASS: TestExtractStringFromAttribute_Nil (0.00s)
=== RUN   TestHasAttribute
--- PASS: TestHasAttribute (0.00s)
=== RUN   TestCopyAndRenameAttribute
=== RUN   TestCopyAndRenameAttribute/Copy_and_rename_existing_attribute
=== RUN   TestCopyAndRenameAttribute/Return_false_for_non-existent_attribute
--- PASS: TestCopyAndRenameAttribute (0.00s)
    --- PASS: TestCopyAndRenameAttribute/Copy_and_rename_existing_attribute (0.00s)
    --- PASS: TestCopyAndRenameAttribute/Return_false_for_non-existent_attribute (0.00s)
=== RUN   TestApplyAttributeRenames
--- PASS: TestApplyAttributeRenames (0.00s)
=== RUN   TestConditionalRenameAttribute
=== RUN   TestConditionalRenameAttribute/Rename_when_condition_is_true
=== RUN   TestConditionalRenameAttribute/Do_not_rename_when_condition_is_false
=== RUN   TestConditionalRenameAttribute/Return_false_for_non-existent_attribute
--- PASS: TestConditionalRenameAttribute (0.00s)
    --- PASS: TestConditionalRenameAttribute/Rename_when_condition_is_true (0.00s)
    --- PASS: TestConditionalRenameAttribute/Do_not_rename_when_condition_is_false (0.00s)
    --- PASS: TestConditionalRenameAttribute/Return_false_for_non-existent_attribute (0.00s)
=== RUN   TestAttributeValueContainsKey
=== RUN   TestAttributeValueContainsKey/Returns_false_for_nil_attribute
=== RUN   TestAttributeValueContainsKey/Returns_false_when_value_is_simple_identifier
=== RUN   TestAttributeValueContainsKey/Returns_false_when_key_does_not_exist_in_non-object
=== RUN   TestAttributeValueContainsKey/Returns_false_for_quoted_string
=== RUN   TestAttributeValueContainsKey/Returns_false_for_dotted_notation_(not_an_object)
=== RUN   TestAttributeValueContainsKey/Returns_false_for_list_values
=== RUN   TestAttributeValueContainsKey/Returns_true_when_key_exists_as_object_key
=== RUN   TestAttributeValueContainsKey/Returns_false_when_checking_for_value_identifier_in_object
=== RUN   TestAttributeValueContainsKey/Returns_true_when_multiple_keys_exist_in_object
=== RUN   TestAttributeValueContainsKey/Returns_false_when_key_does_not_exist_in_object
=== RUN   TestAttributeValueContainsKey/Returns_false_for_numeric_value
=== RUN   TestAttributeValueContainsKey/Returns_false_for_boolean_value
=== RUN   TestAttributeValueContainsKey/Returns_false_for_function_call
=== RUN   TestAttributeValueContainsKey/Returns_true_for_nested_object_with_matching_key
=== RUN   TestAttributeValueContainsKey/Returns_false_for_key_in_deeply_nested_object
=== RUN   TestAttributeValueContainsKey/Returns_false_for_empty_object
--- PASS: TestAttributeValueContainsKey (0.01s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_for_nil_attribute (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_when_value_is_simple_identifier (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_when_key_does_not_exist_in_non-object (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_for_quoted_string (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_for_dotted_notation_(not_an_object) (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_for_list_values (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_true_when_key_exists_as_object_key (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_when_checking_for_value_identifier_in_object (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_true_when_multiple_keys_exist_in_object (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_when_key_does_not_exist_in_object (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_for_numeric_value (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_for_boolean_value (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_for_function_call (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_true_for_nested_object_with_matching_key (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_for_key_in_deeply_nested_object (0.00s)
    --- PASS: TestAttributeValueContainsKey/Returns_false_for_empty_object (0.00s)
=== RUN   TestRenameResourceType
=== RUN   TestRenameResourceType/Rename_resource_type
=== RUN   TestRenameResourceType/Do_not_rename_if_type_doesn't_match
--- PASS: TestRenameResourceType (0.00s)
    --- PASS: TestRenameResourceType/Rename_resource_type (0.00s)
    --- PASS: TestRenameResourceType/Do_not_rename_if_type_doesn't_match (0.00s)
=== RUN   TestGetResourceType
=== RUN   TestGetResourceType/Get_resource_type
=== RUN   TestGetResourceType/Return_empty_for_non-resource_block
--- PASS: TestGetResourceType (0.00s)
    --- PASS: TestGetResourceType/Get_resource_type (0.00s)
    --- PASS: TestGetResourceType/Return_empty_for_non-resource_block (0.00s)
=== RUN   TestGetResourceName
=== RUN   TestGetResourceName/Get_resource_name
=== RUN   TestGetResourceName/Return_empty_for_non-resource_block
--- PASS: TestGetResourceName (0.00s)
    --- PASS: TestGetResourceName/Get_resource_name (0.00s)
    --- PASS: TestGetResourceName/Return_empty_for_non-resource_block (0.00s)
=== RUN   TestConvertBlocksToAttribute
=== RUN   TestConvertBlocksToAttribute/Convert_data_block_to_attribute
=== RUN   TestConvertBlocksToAttribute/Convert_with_preprocessing
--- PASS: TestConvertBlocksToAttribute (0.00s)
    --- PASS: TestConvertBlocksToAttribute/Convert_data_block_to_attribute (0.00s)
    --- PASS: TestConvertBlocksToAttribute/Convert_with_preprocessing (0.00s)
=== RUN   TestHoistAttributeFromBlock
=== RUN   TestHoistAttributeFromBlock/Hoist_attribute_from_block
=== RUN   TestHoistAttributeFromBlock/Do_not_hoist_if_attribute_doesn't_exist_in_block
=== RUN   TestHoistAttributeFromBlock/Do_not_hoist_if_parent_already_has_attribute
--- PASS: TestHoistAttributeFromBlock (0.00s)
    --- PASS: TestHoistAttributeFromBlock/Hoist_attribute_from_block (0.00s)
    --- PASS: TestHoistAttributeFromBlock/Do_not_hoist_if_attribute_doesn't_exist_in_block (0.00s)
    --- PASS: TestHoistAttributeFromBlock/Do_not_hoist_if_parent_already_has_attribute (0.00s)
=== RUN   TestHoistAttributesFromBlock
--- PASS: TestHoistAttributesFromBlock (0.00s)
=== RUN   TestFindBlockByType
=== RUN   TestFindBlockByType/Find_existing_block
=== RUN   TestFindBlockByType/Return_nil_for_non-existent_block
--- PASS: TestFindBlockByType (0.00s)
    --- PASS: TestFindBlockByType/Find_existing_block (0.00s)
    --- PASS: TestFindBlockByType/Return_nil_for_non-existent_block (0.00s)
=== RUN   TestFindBlocksByType
=== RUN   TestFindBlocksByType/Find_multiple_blocks
=== RUN   TestFindBlocksByType/Find_single_block
=== RUN   TestFindBlocksByType/Return_empty_slice_for_non-existent_block
--- PASS: TestFindBlocksByType (0.00s)
    --- PASS: TestFindBlocksByType/Find_multiple_blocks (0.00s)
    --- PASS: TestFindBlocksByType/Find_single_block (0.00s)
    --- PASS: TestFindBlocksByType/Return_empty_slice_for_non-existent_block (0.00s)
=== RUN   TestRemoveBlocksByType
--- PASS: TestRemoveBlocksByType (0.00s)
=== RUN   TestProcessBlocksOfType
=== RUN   TestProcessBlocksOfType/Process_all_matching_blocks
=== RUN   TestProcessBlocksOfType/Stop_on_error
--- PASS: TestProcessBlocksOfType (0.00s)
    --- PASS: TestProcessBlocksOfType/Process_all_matching_blocks (0.00s)
    --- PASS: TestProcessBlocksOfType/Stop_on_error (0.00s)
=== RUN   TestConvertSingleBlockToAttribute
=== RUN   TestConvertSingleBlockToAttribute/Convert_single_block_to_attribute
=== RUN   TestConvertSingleBlockToAttribute/Return_false_for_non-existent_block
--- PASS: TestConvertSingleBlockToAttribute (0.00s)
    --- PASS: TestConvertSingleBlockToAttribute/Convert_single_block_to_attribute (0.00s)
    --- PASS: TestConvertSingleBlockToAttribute/Return_false_for_non-existent_block (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/transform/hcl	(cached)
=== RUN   TestTransformArrayToObject
=== RUN   TestTransformArrayToObject/Transform_basic_array_to_object
=== RUN   TestTransformArrayToObject/Transform_with_skip_fields
=== RUN   TestTransformArrayToObject/Transform_with_rename_fields
=== RUN   TestTransformArrayToObject/Transform_with_default_fields
=== RUN   TestTransformArrayToObject/Transform_with_custom_field_transform
=== RUN   TestTransformArrayToObject/Return_empty_for_empty_array
=== RUN   TestTransformArrayToObject/Return_empty_for_non-array
--- PASS: TestTransformArrayToObject (0.00s)
    --- PASS: TestTransformArrayToObject/Transform_basic_array_to_object (0.00s)
    --- PASS: TestTransformArrayToObject/Transform_with_skip_fields (0.00s)
    --- PASS: TestTransformArrayToObject/Transform_with_rename_fields (0.00s)
    --- PASS: TestTransformArrayToObject/Transform_with_default_fields (0.00s)
    --- PASS: TestTransformArrayToObject/Transform_with_custom_field_transform (0.00s)
    --- PASS: TestTransformArrayToObject/Return_empty_for_empty_array (0.00s)
    --- PASS: TestTransformArrayToObject/Return_empty_for_non-array (0.00s)
=== RUN   TestTransformDataFieldArrayToObject
=== RUN   TestTransformDataFieldArrayToObject/Transform_array_data_field_to_object
=== RUN   TestTransformDataFieldArrayToObject/Remove_empty_array_data_field
=== RUN   TestTransformDataFieldArrayToObject/Handle_existing_object_data_field
=== RUN   TestTransformDataFieldArrayToObject/Add_default_fields_when_data_doesn't_exist
=== RUN   TestTransformDataFieldArrayToObject/Delete_data_field_when_all_fields_are_skipped
--- PASS: TestTransformDataFieldArrayToObject (0.00s)
    --- PASS: TestTransformDataFieldArrayToObject/Transform_array_data_field_to_object (0.00s)
    --- PASS: TestTransformDataFieldArrayToObject/Remove_empty_array_data_field (0.00s)
    --- PASS: TestTransformDataFieldArrayToObject/Handle_existing_object_data_field (0.00s)
    --- PASS: TestTransformDataFieldArrayToObject/Add_default_fields_when_data_doesn't_exist (0.00s)
    --- PASS: TestTransformDataFieldArrayToObject/Delete_data_field_when_all_fields_are_skipped (0.00s)
=== RUN   TestFlattenArrayField
=== RUN   TestFlattenArrayField/Flatten_single-element_array
=== RUN   TestFlattenArrayField/Do_not_flatten_multi-element_array
=== RUN   TestFlattenArrayField/Do_not_flatten_empty_array
=== RUN   TestFlattenArrayField/Handle_non-array_field
--- PASS: TestFlattenArrayField (0.00s)
    --- PASS: TestFlattenArrayField/Flatten_single-element_array (0.00s)
    --- PASS: TestFlattenArrayField/Do_not_flatten_multi-element_array (0.00s)
    --- PASS: TestFlattenArrayField/Do_not_flatten_empty_array (0.00s)
    --- PASS: TestFlattenArrayField/Handle_non-array_field (0.00s)
=== RUN   TestEnsureField
=== RUN   TestEnsureField/Add_missing_field_with_default_value
=== RUN   TestEnsureField/Do_not_overwrite_existing_field
=== RUN   TestEnsureField/Add_boolean_default_value
--- PASS: TestEnsureField (0.00s)
    --- PASS: TestEnsureField/Add_missing_field_with_default_value (0.00s)
    --- PASS: TestEnsureField/Do_not_overwrite_existing_field (0.00s)
    --- PASS: TestEnsureField/Add_boolean_default_value (0.00s)
=== RUN   TestRenameField
=== RUN   TestRenameField/Rename_existing_field
=== RUN   TestRenameField/Remove_old_field_when_both_exist
=== RUN   TestRenameField/Do_nothing_when_old_field_doesn't_exist
--- PASS: TestRenameField (0.00s)
    --- PASS: TestRenameField/Rename_existing_field (0.00s)
    --- PASS: TestRenameField/Remove_old_field_when_both_exist (0.00s)
    --- PASS: TestRenameField/Do_nothing_when_old_field_doesn't_exist (0.00s)
=== RUN   TestRemoveFields
=== RUN   TestRemoveFields/Remove_multiple_fields
=== RUN   TestRemoveFields/Remove_non-existent_fields
--- PASS: TestRemoveFields (0.00s)
    --- PASS: TestRemoveFields/Remove_multiple_fields (0.00s)
    --- PASS: TestRemoveFields/Remove_non-existent_fields (0.00s)
=== RUN   TestCleanupEmptyField
=== RUN   TestCleanupEmptyField/Remove_empty_object
=== RUN   TestCleanupEmptyField/Remove_empty_array
=== RUN   TestCleanupEmptyField/Remove_empty_string
=== RUN   TestCleanupEmptyField/Keep_non-empty_object
=== RUN   TestCleanupEmptyField/Keep_non-empty_array
--- PASS: TestCleanupEmptyField (0.00s)
    --- PASS: TestCleanupEmptyField/Remove_empty_object (0.00s)
    --- PASS: TestCleanupEmptyField/Remove_empty_array (0.00s)
    --- PASS: TestCleanupEmptyField/Remove_empty_string (0.00s)
    --- PASS: TestCleanupEmptyField/Keep_non-empty_object (0.00s)
    --- PASS: TestCleanupEmptyField/Keep_non-empty_array (0.00s)
=== RUN   TestRemoveObjectIfAllNull
=== RUN   TestRemoveObjectIfAllNull/Remove_object_with_all_null_fields
=== RUN   TestRemoveObjectIfAllNull/Keep_object_with_at_least_one_non-null_field
=== RUN   TestRemoveObjectIfAllNull/Handle_non-existent_object
--- PASS: TestRemoveObjectIfAllNull (0.00s)
    --- PASS: TestRemoveObjectIfAllNull/Remove_object_with_all_null_fields (0.00s)
    --- PASS: TestRemoveObjectIfAllNull/Keep_object_with_at_least_one_non-null_field (0.00s)
    --- PASS: TestRemoveObjectIfAllNull/Handle_non-existent_object (0.00s)
=== RUN   TestEnsureTimestamps
=== RUN   TestEnsureTimestamps/Add_both_timestamps_when_missing
=== RUN   TestEnsureTimestamps/Add_modified_on_matching_created_on
=== RUN   TestEnsureTimestamps/Do_not_overwrite_existing_timestamps
--- PASS: TestEnsureTimestamps (0.00s)
    --- PASS: TestEnsureTimestamps/Add_both_timestamps_when_missing (0.00s)
    --- PASS: TestEnsureTimestamps/Add_modified_on_matching_created_on (0.00s)
    --- PASS: TestEnsureTimestamps/Do_not_overwrite_existing_timestamps (0.00s)
=== RUN   TestConvertGjsonValue
=== RUN   TestConvertGjsonValue/Convert_integer
=== RUN   TestConvertGjsonValue/Convert_float
=== RUN   TestConvertGjsonValue/Convert_string
=== RUN   TestConvertGjsonValue/Convert_true
=== RUN   TestConvertGjsonValue/Convert_false
=== RUN   TestConvertGjsonValue/Convert_null
--- PASS: TestConvertGjsonValue (0.00s)
    --- PASS: TestConvertGjsonValue/Convert_integer (0.00s)
    --- PASS: TestConvertGjsonValue/Convert_float (0.00s)
    --- PASS: TestConvertGjsonValue/Convert_string (0.00s)
    --- PASS: TestConvertGjsonValue/Convert_true (0.00s)
    --- PASS: TestConvertGjsonValue/Convert_false (0.00s)
    --- PASS: TestConvertGjsonValue/Convert_null (0.00s)
=== RUN   TestConvertGjsonToJSON
=== RUN   TestConvertGjsonToJSON/Convert_number_preserving_type
=== RUN   TestConvertGjsonToJSON/Convert_float_preserving_type
=== RUN   TestConvertGjsonToJSON/Convert_string
=== RUN   TestConvertGjsonToJSON/Convert_boolean
--- PASS: TestConvertGjsonToJSON (0.00s)
    --- PASS: TestConvertGjsonToJSON/Convert_number_preserving_type (0.00s)
    --- PASS: TestConvertGjsonToJSON/Convert_float_preserving_type (0.00s)
    --- PASS: TestConvertGjsonToJSON/Convert_string (0.00s)
    --- PASS: TestConvertGjsonToJSON/Convert_boolean (0.00s)
=== RUN   TestConvertToFloat64
=== RUN   TestConvertToFloat64/integer_number
=== RUN   TestConvertToFloat64/float_number
=== RUN   TestConvertToFloat64/string_number
=== RUN   TestConvertToFloat64/non-numeric_string
=== RUN   TestConvertToFloat64/null_value
--- PASS: TestConvertToFloat64 (0.00s)
    --- PASS: TestConvertToFloat64/integer_number (0.00s)
    --- PASS: TestConvertToFloat64/float_number (0.00s)
    --- PASS: TestConvertToFloat64/string_number (0.00s)
    --- PASS: TestConvertToFloat64/non-numeric_string (0.00s)
    --- PASS: TestConvertToFloat64/null_value (0.00s)
PASS
ok  	github.com/cloudflare/tf-migrate/internal/transform/state	(cached)
?   	github.com/cloudflare/tf-migrate/scripts	[no test files]
FAIL
