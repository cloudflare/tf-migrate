# Drift Exemptions for zero_trust_dlp_predefined_profile resource
#
# Resource-specific exemptions for cloudflare_zero_trust_dlp_predefined_profile

version: 1

exemptions:
  # The API returns enabled_entries as [] (empty list) but the config uses null (not set).
  # This causes perpetual [] -> null drift that cannot be fixed without breaking the API
  # contract (API rejects having both entries and enabled_entries fields).
  - name: "enabled_entries_empty_to_null"
    description: "enabled_entries changes from [] to null when not set in config"
    patterns:
      - 'enabled_entries.*\[\].*null'
      - 'enabled_entries.*->.*null'
    enabled: true

  # Predefined profiles have computed fields (name, entries, open_access) that the
  # provider recalculates on every plan. These are read-only API fields.
  - name: "predefined_profile_computed_fields"
    description: "Computed fields on predefined profiles recompute every plan"
    patterns:
      - 'entries.*->.*\(known after apply\)'
      - 'name.*->.*\(known after apply\)'
      - 'open_access.*->.*\(known after apply\)'
    enabled: true

settings:
  apply_exemptions: true
  verbose_exemptions: false
